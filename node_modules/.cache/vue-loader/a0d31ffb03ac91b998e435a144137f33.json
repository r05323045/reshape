{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/ProductModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/ProductModal.vue","mtime":1596554804451},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gJ2pxdWVyeScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdGVtcFByb2R1Y3Q6IHsKICAgICAgICBpbWFnZVVybDogW10sCiAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgfSwKICAgICAgbW9kYWxWaWV3OiB7CiAgICAgICAgdGl0bGU6ICflu7rnq4vmlrDnlKLlk4EnLAogICAgICAgIGVuZ1RvWmg6IHsKICAgICAgICAgIHRpdGxlOiAn5qiZ6aGMJywKICAgICAgICAgIGlkOiAnSWQnLAogICAgICAgICAgY2F0ZWdvcnk6ICfliIbpoZ4nLAogICAgICAgICAgdW5pdDogJ+WWruS9jScsCiAgICAgICAgICBvcmlnaW5fcHJpY2U6ICfljp/lg7knLAogICAgICAgICAgcHJpY2U6ICflg7nmoLwnLAogICAgICAgICAgZGVzY3JpcHRpb246ICfnlKLlk4Hmj4/ov7AnLAogICAgICAgICAgY29udGVudDogJ+iqquaYjuWFp+WuuScKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIHByb3BzOiB7CiAgICB0b2tlbjogU3RyaW5nLAogICAgaXNOZXc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHVzZXI6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0ICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2xlYXJUZW1wUHJvZHVjdCAoKSB7CiAgICAgIHRoaXMudGVtcFByb2R1Y3QgPSB7IGltYWdlVXJsOiBbXSwgZW5hYmxlZDogZmFsc2UgfQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKQogICAgfSwKICAgIGdldFByb2R1Y3QgKGlkKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpCiAgICAgIGlmICghdGhpcy5pc05ldykgewogICAgICAgIHRoaXMubW9kYWxWaWV3LnRpdGxlID0gJ+e3qOi8r+eUouWTgScKICAgICAgfQogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9YXBpLyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9hZG1pbi9lYy9wcm9kdWN0LyR7aWR9YAogICAgICB0aGlzLiRodHRwLmdldChhcGkpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdzaG93JykKICAgICAgICAgIHRoaXMudGVtcFByb2R1Y3QgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB9KQogICAgfSwKICAgIHVwZGF0ZVByb2R1Y3QgKHByb2R1Y3REYXRhKSB7CiAgICAgIGlmIChwcm9kdWN0RGF0YSkgewogICAgICAgIHRoaXMudGVtcFByb2R1Y3QgPSBwcm9kdWN0RGF0YQogICAgICB9CiAgICAgIGxldCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9YXBpLyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9hZG1pbi9lYy9wcm9kdWN0YAogICAgICBsZXQgaHR0cE1ldGhvZCA9ICdwb3N0JwogICAgICBpZiAoIXRoaXMuaXNOZXcpIHsKICAgICAgICBhcGkgKz0gYC8ke3RoaXMudGVtcFByb2R1Y3QuaWR9YAogICAgICAgIGh0dHBNZXRob2QgPSAncGF0Y2gnCiAgICAgIH0KICAgICAgdGhpcy5heGlvc01ldGhvZChhcGksIGh0dHBNZXRob2QpCiAgICB9LAogICAgYXhpb3NNZXRob2QgKHVybCwgbWV0aG9kKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnKQogICAgICB0aGlzLiRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dGhpcy50b2tlbn1gCiAgICAgIHRoaXMuJGh0dHBbbWV0aG9kXSh1cmwsIHRoaXMudGVtcFByb2R1Y3QpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdoaWRlJykKICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgncHJvZHVjdFVwZGF0ZScsIHsKICAgICAgICAgICAgcHJvZHVjdDogdGhpcy50ZW1wUHJvZHVjdAogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnKQogICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ProductModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductModal.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div id=\"productModal\" class=\"modal fade\" ref=\"productModal\">\n    <div class=\"modal-dialog modal-lg\" role=\"document\">\n      <validation-observer ref=\"form\" v-slot=\"{ invalid }\">\n        <form @submit.prevent=\"updateProduct(tempProduct)\">\n          <div class=\"modal-content border-0\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\">\n                {{ modalView.title }}\n              </h5>\n              <i class=\"fa fa-times-circle fa-2x\" data-dismiss=\"modal\"></i>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n                <div class=\"col-sm-4\">\n                  <div class=\"form-group\">\n                    <validation-provider v-slot=\"{ errors, classes }\" :rules=\"{ required: true, regex: /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/ }\">\n                      <label for=\"imageUrl\">輸入圖片網址</label>\n                      <input id=\"imageUrl\" v-model=\"tempProduct.imageUrl[0]\" type=\"text\" class=\"form-control\" :class=\"classes\"\n                        placeholder=\"請輸入圖片連結\">\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ `圖片連結${errors[0].slice(9, errors[0].length)}` }}</span>\n                    </validation-provider>\n                  </div>\n                  <div class=\"modal-img-wrapper text-center\">\n                    <img class=\"img-fluid product-image\" :src=\"tempProduct.imageUrl[0]\" alt>\n                  </div>\n                </div>\n                <div class=\"col-sm-8\">\n                  <div>\n                    <div class=\"form-row\">\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                          <label for=\"title\">標題</label>\n                          <input id=\"title\" v-model=\"tempProduct.title\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入標題\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `標題${errors[0].slice(6, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                          <label for=\"category\">分類</label>\n                          <input id=\"category\" v-model=\"tempProduct.category\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入分類\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `分類${errors[0].slice(9, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                    </div>\n                    <div class=\"form-row\">\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required|numeric\">\n                          <label for=\"origin_price\">原價</label>\n                          <input id=\"origin_price\" v-model=\"tempProduct.origin_price\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入原價\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `原價${errors[0].slice(13, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required|numeric\">\n                          <label for=\"price\">價格</label>\n                          <input id=\"price\" v-model=\"tempProduct.price\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入價格\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `價格${errors[0].slice(6, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                    </div>\n                    <div class=\"form-row\">\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                          <label for=\"unit\">單位</label>\n                          <input id=\"unit\" v-model=\"tempProduct.unit\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入單位\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `單位${errors[0].slice(5, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                      <div class=\"form-group col-md-6\">\n                        <label>id</label>\n                        <input type=\"text\" class=\"form-control\" v-model=\"tempProduct.id\" placeholder=\"自動產生\" disabled>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-12\">\n                  <div v-for=\"item in ['description', 'content']\" class=\"form-group\" :key=\"item\">\n                    <validation-provider v-slot=\"{ errors }\" rules=\"required\">\n                      <label :for=\"item\">{{ modalView.engToZh[item] }}</label>\n                      <textarea :id=\"item\" v-model=\"tempProduct[item]\" type=\"text\" class=\"form-control\"\n                        :placeholder=\"`請輸入${modalView.engToZh[item]}`\">\n                      </textarea>\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ `${modalView.engToZh[item]}${errors[0].slice(errors[0].length - 3, errors[0].length)}` }}</span>\n                    </validation-provider>\n                  </div>\n                  <div class=\"form-group\">\n                    <label class=\"form-check-label\" for=\"enabled\">是否啟用</label>\n                    <div class=\"mt-3\">\n                      <div class=\"form-check form-check-inline\">\n                        <input class=\"form-check-input\" type=\"radio\" :value=true v-model=\"tempProduct.enabled\">\n                        <label class=\"form-check-label\">啟用</label>\n                      </div>\n                      <div class=\"form-check form-check-inline\">\n                        <input class=\"form-check-input\" type=\"radio\" :value=false v-model=\"tempProduct.enabled\">\n                        <label class=\"form-check-label\">不啟用</label>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n                取消\n              </button>\n              <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"invalid\">\n                確認\n              </button>\n            </div>\n          </div>\n        </form>\n      </validation-observer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nexport default {\n  data () {\n    return {\n      tempProduct: {\n        imageUrl: [],\n        enabled: false\n      },\n      modalView: {\n        title: '建立新產品',\n        engToZh: {\n          title: '標題',\n          id: 'Id',\n          category: '分類',\n          unit: '單位',\n          origin_price: '原價',\n          price: '價格',\n          description: '產品描述',\n          content: '說明內容'\n        }\n      }\n    }\n  },\n  props: {\n    token: String,\n    isNew: {\n      type: Boolean,\n      default: true\n    },\n    user: {\n      type: Object,\n      default () {\n        return {\n        }\n      }\n    }\n  },\n  methods: {\n    clearTempProduct () {\n      this.tempProduct = { imageUrl: [], enabled: false }\n      this.$refs.form.reset()\n    },\n    getProduct (id) {\n      this.$refs.form.reset()\n      if (!this.isNew) {\n        this.modalView.title = '編輯產品'\n      }\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/product/${id}`\n      this.$http.get(api)\n        .then((res) => {\n          $('#productModal').modal('show')\n          this.tempProduct = res.data.data\n        }).catch((error) => {\n          console.log(error)\n        })\n    },\n    updateProduct (productData) {\n      if (productData) {\n        this.tempProduct = productData\n      }\n      let api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/product`\n      let httpMethod = 'post'\n      if (!this.isNew) {\n        api += `/${this.tempProduct.id}`\n        httpMethod = 'patch'\n      }\n      this.axiosMethod(api, httpMethod)\n    },\n    axiosMethod (url, method) {\n      this.$emit('loading')\n      this.$http.defaults.headers.common.Authorization = `Bearer ${this.token}`\n      this.$http[method](url, this.tempProduct)\n        .then(() => {\n          $('#productModal').modal('hide')\n          this.$bus.$emit('productUpdate', {\n            product: this.tempProduct\n          })\n          this.$emit('loading')\n        }).catch((error) => {\n          console.log(error)\n        })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.modal {\n  .modal-dialog {\n    .modal-content {\n      border-radius: 10px;\n      .modal-header {\n        .fa-times-circle {\n          cursor: pointer;\n        }\n      }\n      .modal-body {\n        text-align: left;\n        padding: 20px;\n        .modal-img-wrapper {\n          padding: 10px;\n          width: 300px;\n          height: 180px;\n          max-width: 100%;\n          max-height: 100%;\n          .product-image {\n            max-width: 100%;\n            max-height: 100%;\n            border-radius: 10px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}