{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/Checkout.vue","mtime":1596375671737},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gJ2pxdWVyeScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDaGVja291dCcsCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIHRlbDogJycsCiAgICAgICAgYWRkcmVzczogJycsCiAgICAgICAgcGF5bWVudDogJycsCiAgICAgICAgbWVzc2FnZTogJycKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIGNhcnQ6IHt9CiAgfSwKICBjb21wdXRlZDogewogICAgY2FydFRvdGFsOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCB0b3RhbCA9IDAKICAgICAgdGhpcy5jYXJ0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICB0b3RhbCArPSBpdGVtLnByb2R1Y3QucHJpY2UgKiBpdGVtLnF1YW50aXR5CiAgICAgIH0pCiAgICAgIHJldHVybiB0b3RhbAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYmFja1RvQ2FydCAoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2JhY2t0b2NhcnQnKQogICAgfSwKICAgIGNyZWF0ZU9yZGVyICgpIHsKICAgICAgY29uc3QgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KHsKICAgICAgICBjb250YWluZXI6IHRoaXMuJHJlZnMuY2hlY2tvdXQsCiAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICBpc0Z1bGxQYWdlOiB0cnVlCiAgICAgIH0pCiAgICAgIGNvbnN0IHVybCA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH1hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUR9L2VjL29yZGVyc2AKICAgICAgdGhpcy4kaHR0cC5wb3N0KHVybCwgdGhpcy5mb3JtKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YS5pZCkgewogICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZvcm0pLmZvckVhY2goaXRlbSA9PiB7IGl0ZW0gPSAnJyB9KQogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm12YWxpZGF0aW9uLnJlc2V0KCkKICAgICAgICAgICAgdGhpcy4kcmVmcy5jaGVja291dGZvcm0ucmVzZXQoKQogICAgICAgICAgICAkKCcjb3JkZXJNb2RhbCcpLm1vZGFsKCdzaG93JykKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnY2FydFVwZGF0ZScsIHsKICAgICAgICAgICAgY2FydDoge30KICAgICAgICAgIH0pCiAgICAgICAgICBsb2FkZXIuaGlkZSgpCiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgICAgICAgIGxvYWRlci5oaWRlKCkKICAgICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Checkout.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"checkout\" ref=\"checkout\">\n    <div class=\"router-wrapper mt-3\">\n        <i class=\"fas fa-chevron-left\" @click=\"backToCart\"></i>\n        <span class=\"mx-2 router\" @click=\"backToCart\">返回購物車</span>\n    </div>\n    <div class=\"my-5 cart-step-wrapper d-flex justify-content-center mx-auto\">\n      <div class=\"cart-step row\">\n        <div class=\"cart-step-icon\">1</div>\n        <div class=\"cart-step-text\">\n            <div>購買品項</div>\n        </div>\n        <div class=\"connector-line\"></div>\n      </div>\n      <div class=\"checkout-step row\">\n        <div class=\"checkout-step-icon\">2</div>\n        <div class=\"checkout-step-text\">填寫地址與結帳</div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"mt-5 col-4 offset-1 cart-summary\" v-if=\"cart.length\">\n        <div class=\"card cart-card mx-auto\">\n          <div class=\"card-header\">\n            訂單摘要\n          </div>\n          <div class=\"card-body d-flex flex-column\">\n            <ul class=\"list-group h-100\">\n              <li class=\"list-group-item d-flex justify-content-between\">\n                <span>商品總計</span>\n                <span>{{ cartTotal | priceFormat}}</span>\n              </li>\n              <li class=\"list-group-item d-flex justify-content-between\">\n                <span>運費總計</span>\n                <span>NT$ 0</span>\n              </li>\n              <div class=\"divider-wrapper\">\n                <div class=\"divider\"></div>\n              </div>\n              <div class=\"list-group-item d-flex w-100 mt-3\">\n                <div class=\"cart-total w-100 d-flex justify-content-between\">\n                    <span>結帳金額</span>\n                    <span>{{ cartTotal | priceFormat}}</span>\n                </div>\n              </div>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"mt-3 col-6 justify-content-center checkout-form\">\n        <validation-observer ref=\"formvalidation\" v-slot=\"{ invalid }\" class=\"col-md-6\">\n          <form ref=\"checkoutform\" @submit.prevent=\"createOrder\">\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"username\">收件人姓名</label>\n                <input id=\"username\" v-model=\"form.name\" type=\"text\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `收件人姓名${errors[0].slice(9, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"email\">Email</label>\n                <input id=\"email\" v-model=\"form.email\" type=\"email\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `Email${errors[0].slice(6, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider  v-slot=\"{ errors, classes }\" rules=\"required|numeric|min:8\">\n                <label for=\"tel\">電話</label>\n                <input id=\"tel\" v-model=\"form.tel\" type=\"tel\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `電話${errors[0].slice(4, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"address\">地址</label>\n                <input id=\"address\" v-model=\"form.address\" type=\"text\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `地址${errors[0].slice(8, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"message\">購買方式</label>\n                <select id=\"payment\" v-model=\"form.payment\" class=\"form-control\" :class=\"classes\" required>\n                  <option value=\"\" disabled>\n                    請選擇付款方式\n                  </option>\n                  <option value=\"WebATM\">\n                    WebATM\n                  </option>\n                  <option value=\"ATM\">\n                    ATM\n                  </option>\n                  <option value=\"CVS\">\n                    CVS\n                  </option>\n                  <option value=\"Barcode\">\n                    Barcode\n                  </option>\n                  <option value=\"Credit\">\n                    Credit\n                  </option>\n                  <option value=\"ApplePay\">\n                    ApplePay\n                  </option>\n                  <option value=\"GooglePay\">\n                    GooglePay\n                  </option>\n                </select>\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `購買方式${errors[0].slice(8, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"message\">留言</label>\n              <textarea id=\"message\" v-model=\"form.message\" class=\"form-control\" cols=\"30\" rows=\"3\"></textarea>\n            </div>\n            <div class=\"text-right\">\n              <button type=\"submit\" class=\"btn checkout-submit\" :disabled=\"invalid\">\n                送出\n              </button>\n            </div>\n          </form>\n        </validation-observer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nexport default {\n  name: 'Checkout',\n  data () {\n    return {\n      form: {\n        name: '',\n        email: '',\n        tel: '',\n        address: '',\n        payment: '',\n        message: ''\n      }\n    }\n  },\n  props: {\n    cart: {}\n  },\n  computed: {\n    cartTotal: function () {\n      let total = 0\n      this.cart.forEach((item) => {\n        total += item.product.price * item.quantity\n      })\n      return total\n    }\n  },\n  methods: {\n    backToCart () {\n      this.$emit('backtocart')\n    },\n    createOrder () {\n      const loader = this.$loading.show({\n        container: this.$refs.checkout,\n        opacity: 1,\n        isFullPage: true\n      })\n      const url = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/ec/orders`\n      this.$http.post(url, this.form)\n        .then((response) => {\n          if (response.data.data.id) {\n            Object.keys(this.form).forEach(item => { item = '' })\n            this.$refs.formvalidation.reset()\n            this.$refs.checkoutform.reset()\n            $('#orderModal').modal('show')\n          }\n          this.$router.push('/')\n          this.$bus.$emit('cartUpdate', {\n            cart: {}\n          })\n          loader.hide()\n        }).catch((error) => {\n          console.log(error)\n          this.$router.push('/')\n          loader.hide()\n        })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.checkout{\n  margin-top: 80px;\n  height: 100%;\n  overflow: visible;\n  max-height: none;\n  max-width: 1140px;\n  background: #ffffff;\n  .router-wrapper {\n    .router {\n      width: 100%;\n      cursor: pointer;\n      color: #10567b;\n    }\n    .router:hover {\n      text-decoration: underline;\n    }\n    .fa-chevron-left {\n      cursor: pointer;\n      color: #2e90b7;\n    }\n  }\n  .cart-step-wrapper {\n    .cart-step {\n      width: 300px;\n      position: relative;\n    }\n    .cart-step-icon {\n        z-index: 999;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        background-color: #10567b;\n        color: #ffffff;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n    }\n    .cart-step-text {\n        padding-left: 15px;\n        padding-right: 10px;\n        z-index: 999;\n        background-color: #ffffff;\n        display: inline-block;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        height: 50px;\n    }\n    .checkout-step-icon {\n        z-index: 999;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        background-color: #10567b;\n        color: #ffffff;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n    }\n    .checkout-step-text {\n        padding-left: 15px;\n        padding-right: 10px;\n        z-index: 999;\n        background-color: #ffffff;\n        display: inline-block;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        height: 50px;\n        color: #000000\n    }\n    .connector-line {\n        z-index: 1;\n        position: absolute;\n        left: 0;\n        top: 23px;\n        background-color: #10567b;\n        width: 100%;\n        height: 2px;\n        vertical-align: middle;\n    }\n  }\n  .checkout-form {\n    .checkout-submit {\n      color: #ffffff;\n      background-color: #10567b;\n      text-decoration: none;\n    }\n    .checkout-submit:hover, .checkout-submit:focus, .checkout-submit:active:hover {\n      color: #ffffff;\n      background-color: #092c3f;\n    }\n  }\n  .modal {\n    .modal-content {\n      border: 0 none;\n      border-radius: 10px;\n      .modal-body {\n        vertical-align: middle;\n        line-height: 72px;\n      }\n    }\n    .btn {\n      border-radius: 5px;\n    }\n  }\n}\n</style>\n"]}]}