{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/Product.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/Product.vue","mtime":1596555971759},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAnbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9zY3NzL2Jvb3RzdHJhcCc7CkBpbXBvcnQgJ25vZGVfbW9kdWxlcy9ib290c3RyYXAtdnVlL3NyYy9pbmRleC5zY3NzJzsKJHBpbms6ICNlZTg0N2Q7CiRuYXZ5OiAjMTA1NjdiOwokYmx1ZTogIzJlOTBiNzsKJGdyYXk6ICMzOTM5M2U7CiRsaWdodC1ncmF5OiAjYThhOGFiOwoucHJvZHVjdCB7CiAgbWFyZ2luLXRvcDogODBweDsKICBoZWlnaHQ6IDEwMCU7CiAgb3ZlcmZsb3c6IHZpc2libGU7CiAgbWF4LWhlaWdodDogbm9uZTsKICBtYXgtd2lkdGg6IDExNDBweDsKICAuaW5mbyB7CiAgICBwYWRkaW5nOiAzNnB4OwogICAgLnRpdGxlIHsKICAgICAgZm9udC1zaXplOiAyNnB4OwogICAgICBmb250LXdlaWdodDogNzAwOwogICAgICBjb2xvcjogJGdyYXk7CiAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICB9CiAgICAucHJpY2Utd3JhcHBlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICAgIC5wcmljZSB7CiAgICAgICAgaGVpZ2h0OiA1MHB4OwogICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgICBmb250LXNpemU6IDI0cHg7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4OwogICAgICAgIGNvbG9yOiAkbmF2eTsKICAgICAgfQogICAgICAub3JpZ2luLXByaWNlIHsKICAgICAgICBoZWlnaHQ6IDUwcHg7CiAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICBsaW5lLWhlaWdodDogNTBweDsKICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDsKICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgY29sb3I6ICRsaWdodC1ncmF5OwogICAgICB9CiAgICB9CiAgICAuZGlzY291bnQgewogICAgICBtYXgtd2lkdGg6IDIwMHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICBib3JkZXI6IHNvbGlkIDFweCAkcGluazsKICAgICAgLmJhZGdlIHsKICAgICAgICBwYWRkaW5nOiAwIDEwcHg7CiAgICAgICAgaGVpZ2h0OiA1MHB4OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDJweCAwIDJweCAwOwogICAgICAgIGJhY2tncm91bmQ6ICRwaW5rOwogICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgIGJveC1zaGFkb3c6IDFweCAxcHggMnB4IDAgcmdiYSgwLDAsMCwwLjIpOwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBsaW5lLWhlaWdodDogNTBweDsKICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICB9CiAgICAgIC5zYXZlLW1vbmV5IHsKICAgICAgICBtYXJnaW4tbGVmdDogMjBweDsKICAgICAgICBoZWlnaHQ6IDUwcHg7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgY29sb3I6ICRncmF5OwogICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4OwogICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgIH0KICAgIH0KICAgIC5jb250ZW50IHsKICAgICAgbWFyZ2luLXRvcDogMzBweDsKICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICB9CiAgICAucmF0aW5nIHsKICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgLnN0YXItaXRlbXsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgd2lkdGg6IDEwcHg7CiAgICAgICAgaGVpZ2h0OiAxMHB4OwogICAgICAgIG1hcmdpbi1yaWdodDogM3B4OwogICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxMHB4IDEwcHg7CiAgICAgIH0KICAgICAgLnN0YXItaXRlbTpsYXN0LWNoaWxkewogICAgICAgIG1hcmdpbi1yaWdodDogMDsKICAgICAgfQogICAgICAub257CiAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9wdWJsaWMvaW1hZ2VzL3N0YXIvc3RhcjI0X29uQDJ4LnBuZycpCiAgICAgIH0KICAgICAgLm9mZnsKICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL3B1YmxpYy9pbWFnZXMvc3Rhci9zdGFyMjRfb2ZmQDJ4LnBuZycpCiAgICAgIH0KICAgICAgLmhhbGZ7CiAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9wdWJsaWMvaW1hZ2VzL3N0YXIvc3RhcjI0X2hhbGZAMngucG5nJykKICAgICAgfQogICAgICAuY291bnQgewogICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgIH0KICAgIH0KICAgIC5xdWFudGl0eSB7CiAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgIG1heC13aWR0aDogMTAwcHg7CiAgICAgIC5pbnB1dC1hcmVhIHsKICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICB9CiAgICB9CiAgICAucHV0LWluLWNhcnQgewogICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAuYWRkLXRvLWNhcnQgewogICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRwaW5rOwogICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICB9CiAgICAgIC5hZGQtdG8tY2FydDpob3ZlciwgLmFkZC10by1jYXJ0OmZvY3VzLCAuYWRkLXRvLWNhcnQ6YWN0aXZlOmhvdmVyIHsKICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjE2YzVkOwogICAgICB9CiAgICAgIC5nby10by1jaGVja291dCB7CiAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzEwNTY3YjsKICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgIH0KICAgICAgLmdvLXRvLWNoZWNrb3V0OmhvdmVyLCAuZ28tdG8tY2hlY2tvdXQ6Zm9jdXMsIC5nby10by1jaGVja291dDphY3RpdmU6aG92ZXIgewogICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwOTJjM2Y7CiAgICAgIH0KICAgIH0KICAgIC5kZXNjcmlwdGlvbiB7CiAgICAgIGNvbG9yOiAkZ3JheTsKICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgIH0KICB9CiAgLmltYWdlcyB7CiAgICBwYWRkaW5nOiAzNnB4OwogIH0KfQo="},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"product\" ref=\"product\">\n    <div class=\"router-wrapper mt-3\">\n      <router-link to=\"/\"><span class=\"mr-2 router\">首頁</span></router-link>\n      <i class=\"fas fa-chevron-right\"></i>\n      <span class=\"ml-2\">{{ product.category }}</span>\n    </div>\n    <div class=\"row mt-5\" v-if=\"product.title\">\n      <div class=\"col-7 images\">\n        <div class=\"main-img\">\n          <img :src=\"product.imageUrl? product.imageUrl[0]: ''\" class=\"w-100\">\n        </div>\n      </div>\n      <div class=\"col-5 info\">\n        <div class=\"title\">{{ product.title }}</div>\n        <div class=\"price-wrapper\">\n          <div class=\"price\">{{ product.price | priceFormat }}</div>\n          <div class=\"origin-price\">{{ product.origin_price | priceFormat }}</div>\n        </div>\n        <div class=\"discount\" v-show=\"0.85 > product.price/product.origin_price\">\n          <div class=\"badge\">\n            {{ `${(product.price/product.origin_price).toFixed(1) * 10} 折` }}\n          </div>\n          <div class=\"save-money\">\n            省下{{ product.origin_price - product.price | priceFormat }}\n          </div>\n        </div>\n        <div class=\"content\">\n            {{ product.content }}\n        </div>\n        <div class=\"rating\">\n          <span v-for=\"(score, index) in randomRating.rate\" :class=\"score\" class=\"star-item\" :key=\"index\"></span>\n          <span class=\"count\">{{ `(${randomRating.count})`  }}</span>\n        </div>\n        <div class=\"quantity\">\n          <div>數量</div>\n          <div class=\"input-area\">\n            <select class=\"form-control\" v-if=\"cartPatch.quantity <= 4\" v-model=\"cartQuantity\">\n              <option v-for=\"integer in Array.from(Array(4).keys())\" :key=\"integer\">\n                  {{ integer + 1 }}\n              </option>\n              <option value=\"5\">5+</option>\n            </select>\n            <validation-observer>\n              <validation-provider v-slot=\"{ errors }\" rules=\"required|numeric|min_value:1\">\n                <input :ref=\"`quantity-input-${product.id}`\" type=\"text\" class=\"form-control\" v-model.lazy=\"cartQuantity\" v-show=\"cartPatch.quantity > 4\">\n                <span v-if=\"errors[0]\" class=\"text-danger quantity-error\">{{ `數量${errors[0].slice((product.id.length + 16), errors[0].length)}` }}</span>\n              </validation-provider>\n            </validation-observer>\n          </div>\n        </div>\n        <div class=\"put-in-cart\">\n          <div v-if=\"!alreadyPut\" class=\"add-to-cart btn d-flex justify-content-center mt-3 mb-3\" @click=\"addToCart\">\n            <span>放入購物車</span>\n          </div>\n          <div v-if=\"alreadyPut\" class=\"go-to-checkout btn d-flex justify-content-center mt-3 mb-3\" @click=\"$router.push('/cart')\">\n            <span>立刻結帳</span>\n          </div>\n        </div>\n        <div class=\"description\">\n          {{ product.description }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Product',\n  data () {\n    return {\n      product: {},\n      cart: {},\n      cartPatch: {\n        product: String,\n        quantity: 1\n      },\n      cartQuantity: 1,\n      alreadyPut: false,\n      randomRating: {\n        rate: [],\n        count: Number\n      }\n    }\n  },\n  computed: {\n    cartId: function () {\n      if (this.cart.length > 0) {\n        return this.cart.map(item => item.product.id)\n      }\n      return []\n    }\n  },\n  watch: {\n    cartQuantity: function (newValue, oldValue) {\n      let num = newValue\n      if (!/^[0-9]+$/.test(num) || num < 1) {\n        num = oldValue\n        this.cartQuantity = oldValue\n      }\n      this.cartPatch.quantity = num\n    }\n  },\n  created () {\n    const loader = this.$loading.show({\n      container: this.$refs.product,\n      opacity: 1,\n      isFullPage: true\n    })\n    const { id } = this.$route.params\n    this.cartPatch.product = id\n    const url = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/ec/product/${id}`\n    this.$http.get(url)\n      .then((res) => {\n        this.product = res.data.data\n        this.getCart(loader)\n      })\n    this.randomRating.rate = this.rating()\n    this.randomRating.count = Math.floor((50 + Math.random() * 500))\n  },\n  methods: {\n    rating () {\n      const result = []\n      const score = Math.floor((2.5 + Math.random() * 2) * 2.5) / 2\n      for (let i = 0; i < Math.floor(score); i++) {\n        result.push('on')\n      }\n      if (score % 1 !== 0) {\n        result.push('half')\n      }\n      while (result.length < 5) {\n        result.push('off')\n      }\n      return result\n    },\n    addToCart () {\n      const loader = this.$loading.show({\n        container: this.$refs.product,\n        opacity: 0.8\n      })\n      const url = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/ec/shopping`\n      let method = 'post'\n      const indexOfPatch = this.cartId.indexOf(this.cartPatch.product)\n      if (indexOfPatch >= 0) {\n        method = 'patch'\n        if (this.cart[indexOfPatch].quantity === Number(this.cartPatch.quantity)) {\n          method = 'none'\n          setTimeout(() => { loader.hide() }, 1000)\n        }\n      }\n      if (method !== 'none') {\n        this.$http[method](url, this.cartPatch)\n          .then(() => {\n            this.getCart(loader)\n          })\n          .catch((error) => {\n            console.log(error.response.data.errors)\n          })\n      }\n      this.alreadyPut = true\n    },\n    getCart (loader) {\n      const url = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/ec/shopping`\n      this.$http.get(url)\n        .then((res) => {\n          this.cart = res.data.data\n          if (loader) {\n            loader.hide()\n          }\n          console.log()\n        })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n@import 'node_modules/bootstrap/scss/bootstrap';\n@import 'node_modules/bootstrap-vue/src/index.scss';\n$pink: #ee847d;\n$navy: #10567b;\n$blue: #2e90b7;\n$gray: #39393e;\n$light-gray: #a8a8ab;\n.product {\n  margin-top: 80px;\n  height: 100%;\n  overflow: visible;\n  max-height: none;\n  max-width: 1140px;\n  .info {\n    padding: 36px;\n    .title {\n      font-size: 26px;\n      font-weight: 700;\n      color: $gray;\n      margin-bottom: 15px;\n    }\n    .price-wrapper {\n      display: flex;\n      flex-direction: row;\n      .price {\n        height: 50px;\n        vertical-align: middle;\n        line-height: 50px;\n        font-weight: 500;\n        font-size: 24px;\n        margin-right: 20px;\n        color: $navy;\n      }\n      .origin-price {\n        height: 50px;\n        vertical-align: middle;\n        line-height: 50px;\n        text-decoration: line-through;\n        font-size: 20px;\n        color: $light-gray;\n      }\n    }\n    .discount {\n      max-width: 200px;\n      display: flex;\n      flex-direction: row;\n      margin-top: 20px;\n      border: solid 1px $pink;\n      .badge {\n        padding: 0 10px;\n        height: 50px;\n        border-radius: 2px 0 2px 0;\n        background: $pink;\n        font-weight: 700;\n        font-size: 16px;\n        color: #ffffff;\n        box-shadow: 1px 1px 2px 0 rgba(0,0,0,0.2);\n        text-align: center;\n        line-height: 50px;\n        vertical-align: middle;\n      }\n      .save-money {\n        margin-left: 20px;\n        height: 50px;\n        font-size: 16px;\n        font-weight: 700;\n        color: $gray;\n        line-height: 50px;\n        vertical-align: middle;\n      }\n    }\n    .content {\n      margin-top: 30px;\n      line-height: 30px;\n      font-weight: 500;\n    }\n    .rating {\n      margin-top: 20px;\n      .star-item{\n        display: inline-block;\n        width: 10px;\n        height: 10px;\n        margin-right: 3px;\n        background-repeat: no-repeat;\n        background-size: 10px 10px;\n      }\n      .star-item:last-child{\n        margin-right: 0;\n      }\n      .on{\n        background-image: url('../../public/images/star/star24_on@2x.png')\n      }\n      .off{\n        background-image: url('../../public/images/star/star24_off@2x.png')\n      }\n      .half{\n        background-image: url('../../public/images/star/star24_half@2x.png')\n      }\n      .count {\n        margin-left: 5px;\n        font-size: 10px;\n        font-weight: 500;\n      }\n    }\n    .quantity {\n      margin-top: 20px;\n      max-width: 100px;\n      .input-area {\n        margin-top: 20px;\n      }\n    }\n    .put-in-cart {\n      margin-top: 20px;\n      .add-to-cart {\n        color: #ffffff;\n        background-color: $pink;\n        text-decoration: none;\n        font-weight: 700;\n      }\n      .add-to-cart:hover, .add-to-cart:focus, .add-to-cart:active:hover {\n        color: #ffffff;\n        background-color: #f16c5d;\n      }\n      .go-to-checkout {\n        color: #ffffff;\n        background-color: #10567b;\n        text-decoration: none;\n      }\n      .go-to-checkout:hover, .go-to-checkout:focus, .go-to-checkout:active:hover {\n        color: #ffffff;\n        background-color: #092c3f;\n      }\n    }\n    .description {\n      color: $gray;\n      margin-top: 20px;\n    }\n  }\n  .images {\n    padding: 36px;\n  }\n}\n</style>\n"]}]}