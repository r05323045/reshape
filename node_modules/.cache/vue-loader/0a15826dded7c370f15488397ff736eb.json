{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Login.vue","mtime":1596553827856},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogewogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgdG9rZW46ICcnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaWduaW4gKCkgewogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9YXBpL2F1dGgvbG9naW5gCiAgICAgIHRoaXMuJGh0dHAucG9zdChhcGksIHRoaXMudXNlcikudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zdCB7IHRva2VuIH0gPSByZXNwb25zZS5kYXRhCiAgICAgICAgY29uc3QgeyBleHBpcmVkIH0gPSByZXNwb25zZS5kYXRhCiAgICAgICAgLy8g5a+r5YWlIGNvb2tpZSB0b2tlbgogICAgICAgIC8vIGV4cGlyZXMg6Kit572u5pyJ5pWI5pmC6ZaTCiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGhleFRva2VuPSR7dG9rZW59O2V4cGlyZXM9JHtuZXcgRGF0ZShleHBpcmVkICogMTAwMCl9O2AKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FkbWluJykKICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9LAogICAgc2lnbm91dCAoKSB7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdoZXhUb2tlbj07ZXhwaXJlcz07JwogICAgICBjb25zb2xlLmxvZygndG9rZW4g5bey5riF6ZmkJykKICAgIH0sCiAgICBnZXREYXRhICgpIHsKICAgICAgLy8g5Y+W5b6XIHRva2VuIOeahCBjb29raWVz77yI5rOo5oSP5Y+W5b6X55qE5pmC6ZaT6bue77yJCiAgICAgIC8vIOips+aDheiri+imi++8mmh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9jb29raWUKICAgICAgdGhpcy50b2tlbiA9IGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKC8oPzooPzpefC4qO1xzKiloZXhUb2tlblxzKj1ccyooW147XSopLiokKXxeLiokLywgJyQxJykKICAgICAgLy8gQVBJCiAgICAgIGNvbnN0IGFwaSA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH1hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUR9L2FkbWluL2VjL3Byb2R1Y3RzYAogICAgICB0aGlzLiRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dGhpcy50b2tlbn1gCiAgICAgIHRoaXMuJGh0dHAuZ2V0KGFwaSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gcmVzcG9uc2UuZGF0YS5tZXRhLnBhZ2luYXRpb24KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div>\n    <form class=\"form-signin\" @submit.prevent=\"signin\">\n      <h1 class=\"h3 mb-3 font-weight-normal\">\n        請先登入\n      </h1>\n      <div class=\"form-group\">\n        <label for=\"inputEmail\" class=\"sr-only\">Email address</label>\n        <input id=\"inputEmail\" v-model=\"user.email\" type=\"email\"\n          class=\"form-control\" placeholder=\"Email address\"\n          required autofocus>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n        <input id=\"inputPassword\" v-model=\"user.password\" type=\"password\" class=\"form-control\"\n          placeholder=\"Password\" required>\n      </div>\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\n        登入\n      </button>\n      <br>\n      <button class=\"btn btn-outline-primary btn-block\" type=\"button\" @click=\"signout\">\n        登出\n      </button>\n      <br>\n      <button class=\"btn btn-outline-primary btn-block\" type=\"button\" @click=\"getData\">\n        取得資料\n      </button>\n      <p class=\"mt-5 mb-3 text-muted\">\n        &copy; 2020~∞ - 六角學院\n      </p>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data () {\n    return {\n      user: {\n        email: '',\n        password: ''\n      },\n      token: ''\n    }\n  },\n  methods: {\n    signin () {\n      const api = `${process.env.VUE_APP_APIPATH}api/auth/login`\n      this.$http.post(api, this.user).then((response) => {\n        const { token } = response.data\n        const { expired } = response.data\n        // 寫入 cookie token\n        // expires 設置有效時間\n        document.cookie = `hexToken=${token};expires=${new Date(expired * 1000)};`\n        this.$router.push('/admin')\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n    signout () {\n      document.cookie = 'hexToken=;expires=;'\n      console.log('token 已清除')\n    },\n    getData () {\n      // 取得 token 的 cookies（注意取得的時間點）\n      // 詳情請見：https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie\n      this.token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\n      // API\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/products`\n      this.$http.defaults.headers.common.Authorization = `Bearer ${this.token}`\n      this.$http.get(api).then((response) => {\n        this.products = response.data.data\n        this.pagination = response.data.meta.pagination\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody {\n  height: 100vh;\n  text-align: center;\n}\nbody {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n"]}]}