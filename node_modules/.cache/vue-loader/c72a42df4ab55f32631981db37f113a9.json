{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Products.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Products.vue","mtime":1596555748117},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYmFja2VuZC1wcm9kdWN0cyB7CiAgbWFyZ2luOiBhdXRvOwogIG1heC13aWR0aDogMTE0MHB4OwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICAuYWJvdmUtdGFibGUgewogICAgLmJ0biB7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICB9CiAgICAuY3JlYXRlLXByb2R1Y3QgewogICAgICBiYWNrZ3JvdW5kOiAjNjNjNzZhOwogICAgICBjb2xvcjogI0ZGRkZGRjsKICAgICAgYm9yZGVyLXJhZGl1czogMHB4OwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MsIGJveC1zaGFkb3cgMC4zczsKICAgIH0KICAgIC5jcmVhdGUtcHJvZHVjdDpob3ZlciB7CiAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICBiYWNrZ3JvdW5kOiAjNDlFODQ1OwogICAgfQogIH0KICAudGFibGUtd3JhcHBlciB7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMnB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgLW1vei1ib3gtc2hhZG93OiAwcHggMnB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgYm94LXNoYWRvdzogMHB4IDJweCA1cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgIC50YWJsZSB7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7CiAgICAgIHRoZWFkIHsKICAgICAgICB0aCB7CiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgIH0KICAgICAgfQogICAgICB0Ym9keSB7CiAgICAgICAgdHIgewogICAgICAgICAgdGQgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgICAgIC50ZC1pbWcgewogICAgICAgICAgICAgIG1heC13aWR0aDogMzAwcHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLm9ub2Zmc3dpdGNoIHsKICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiA2MHB4OwogICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsgLW1vei11c2VyLXNlbGVjdDpub25lOyAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgLm9ub2Zmc3dpdGNoLWNoZWNrYm94IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLm9ub2Zmc3dpdGNoLWxhYmVsIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDM2cHg7IHBhZGRpbmc6IDA7IG1hcmdpbjogMHB4OyBsaW5lLWhlaWdodDogMzZweDsKICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNFM0UzRTM7IGJvcmRlci1yYWRpdXM6IDM2cHg7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTNFM0UzOwogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UtaW47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC5vbm9mZnN3aXRjaC1sYWJlbDpiZWZvcmUgewogICAgICAgICAgICAgICAgY29udGVudDogIiI7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgd2lkdGg6IDM2cHg7IG1hcmdpbjogMHB4OwogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI0ZGRkZGRjsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7CiAgICAgICAgICAgICAgICByaWdodDogMjJweDsKICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNFM0UzRTM7IGJvcmRlci1yYWRpdXM6IDM2cHg7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluIDBzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAub25vZmZzd2l0Y2gtY2hlY2tib3guY2hlY2tlZCArIC5vbm9mZnN3aXRjaC1sYWJlbCB7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDlFODQ1OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAub25vZmZzd2l0Y2gtY2hlY2tib3guY2hlY2tlZCArIC5vbm9mZnN3aXRjaC1sYWJlbCwKICAgICAgICAgICAgICAub25vZmZzd2l0Y2gtY2hlY2tib3guY2hlY2tlZCArIC5vbm9mZnN3aXRjaC1sYWJlbDpiZWZvcmUgewogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNDlFODQ1OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAub25vZmZzd2l0Y2gtY2hlY2tib3guY2hlY2tlZCArIC5vbm9mZnN3aXRjaC1sYWJlbDpiZWZvcmUgewogICAgICAgICAgICAgICAgcmlnaHQ6IDBweDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0KLm1vZGFsLWNvbnRlbnQgewogICAgYm9yZGVyLXJhZGl1czogMTBweDsKfQoKLmltZy13cmFwcGVyIHsKICAgIHBhZGRpbmc6IDEwcHg7CiAgICB3aWR0aDogMjAwcHg7CiAgICBoZWlnaHQ6IDEwMHB4Owp9Ci5tb2RhbC1pbWctd3JhcHBlciB7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgd2lkdGg6IDMwMHB4OwogICAgaGVpZ2h0OiAxODBweDsKICAgIG1heC13aWR0aDogMTAwJTsKICAgIG1heC1oZWlnaHQ6IDEwMCU7Cn0KLnByb2R1Y3QtaW1hZ2UgewogICAgbWF4LXdpZHRoOiAxMDAlOwogICAgbWF4LWhlaWdodDogMTAwJTsKICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KLnZhbGlkYXRpb24gewogICAgZm9udC1zaXplOiAxMHB4Owp9Ci5mYS10aW1lcy1jaXJjbGUgewogICAgY3Vyc29yOiBwb2ludGVyOwp9Cg=="},{"version":3,"sources":["Products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Products.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div class=\"backend-products\" ref=\"backend-products\">\n    <loading :active.sync=\"isLoading\"></loading>\n    <div class=\"above-table text-right mt-4\">\n      <button class=\"btn create-product\" @click=\"openModal('new')\">\n        ＋ ADD ITEM\n      </button>\n    </div>\n    <div class=\"table-wrapper\">\n      <table class=\"table mt-4\">\n        <thead class=\"thead-dark\">\n          <tr>\n            <th></th>\n            <th>分類</th>\n            <th>產品名稱</th>\n            <th>原價</th>\n            <th>售價</th>\n            <th>啟用</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in products\" :key=\"item.id\">\n            <td class=\"td-img\">\n              <div class=\"img-wrapper mx-auto my-auto\">\n                <img :src=\"item.imageUrl\" class=\"product-image\">\n              </div>\n            </td>\n            <td>{{ item.category }}</td>\n            <td>{{ item.title }}</td>\n            <td>{{ item.origin_price }}</td>\n            <td>{{ item.price }}</td>\n            <td>\n              <div class=\"onoffswitch mx-auto align-middle\">\n                <input type=\"checkbox\"  @click=\"switchToActive(item)\" name=\"onoffswitch\" class=\"onoffswitch-checkbox\" :class=\"{ checked: item.enabled}\" :id=\"`switch-${item.id}`\" tabindex=\"0\" checked>\n                <label class=\"onoffswitch-label\" :for=\"`switch-${item.id}`\"></label>\n              </div>\n            </td>\n            <td>\n              <button class=\"btn btn-sm\" @click=\"openModal('edit', item)\" @mouseover=\"toolTip\" data-toggle=\"tooltip\" title=\"編輯產品\">\n                  <i class=\"fa fa-edit fa-lg\"></i>\n              </button>\n              <button class=\"btn btn-sm\" @click=\"openModal('delete', item)\" @mouseover=\"toolTip\" data-toggle=\"tooltip\" title=\"刪除產品\">\n                  <i class=\"fa fa-trash fa-lg\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <pagination :pages=\"pagination\" @emit-pages=\"getProducts\" class=\"pagination-wrapper\"></pagination>\n    <product-modal ref=\"productModel\" :is-new=\"isNew\" :token=\"token\" @loading=\"loadingSwitch\"></product-modal>\n    <del-product-modal :temp-product=\"tempProduct\" @update=\"getProducts\" :token=\"token\"></del-product-modal>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nimport productModal from './ProductModal'\nimport delProductModal from './DelProductModal'\nimport pagination from '.././Pagination'\nexport default {\n  name: 'Products',\n  props: ['token'],\n  data () {\n    return {\n      products: [],\n      pagination: {},\n      isLoading: false,\n      tempProduct: {\n        imageUrl: [],\n        enabled: false\n      },\n      isNew: false\n    }\n  },\n  components: {\n    productModal,\n    delProductModal,\n    pagination\n  },\n  created () {\n    this.getProducts()\n    this.$bus.$on('productUpdate', event => {\n      const productsId = this.products.map(product => product.id)\n      console.log(productsId)\n      if (productsId.includes(event.product.id)) {\n        this.products.forEach((el, idx) => {\n          if (el.id === event.product.id) {\n            this.products[idx] = event.product\n          }\n        })\n      } else {\n        this.getProducts()\n      }\n    })\n  },\n  methods: {\n    getProducts (page = 1) {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/products?page=${page}`\n      this.$http.get(api).then((response) => {\n        this.products = response.data.data\n        this.pagination = response.data.meta.pagination\n        this.isLoading = false\n      })\n    },\n    openModal (isNew, item) {\n      switch (isNew) {\n        case 'new':\n          this.isNew = true\n          this.$refs.productModel.clearTempProduct()\n          $('#productModal').modal('show')\n          break\n        case 'edit':\n          this.tempProduct = Object.assign({}, item)\n          this.isNew = false\n          this.$refs.productModel.getProduct(this.tempProduct.id)\n          break\n        case 'delete':\n          $('#delProductModal').modal('show')\n          this.tempProduct = Object.assign({}, item)\n          break\n        default:\n          break\n      }\n    },\n    switchToActive (item) {\n      this.tempProduct = Object.assign({}, item)\n      this.tempProduct.enabled = !this.tempProduct.enabled\n      this.isNew = false\n      this.$refs.productModel.updateProduct(this.tempProduct)\n    },\n    toolTip () {\n      $('[data-toggle=\"tooltip\"]').tooltip()\n    },\n    loadingSwitch () {\n      this.isLoading = !this.isLoading\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.backend-products {\n  margin: auto;\n  max-width: 1140px;\n  width: 100%;\n  height: 100%;\n  .above-table {\n    .btn {\n      border-radius: 10px;\n    }\n    .create-product {\n      background: #63c76a;\n      color: #FFFFFF;\n      border-radius: 0px;\n      transition: background-color 0.3s, box-shadow 0.3s;\n    }\n    .create-product:hover {\n      color: #FFFFFF;\n      background: #49E845;\n    }\n  }\n  .table-wrapper {\n    border-radius: 10px;\n    -webkit-box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);\n    -moz-box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);\n    box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);\n    .table {\n      max-width: 100%;\n      width: 100%;\n      border-radius: 10px;\n      overflow: hidden;\n      background-color: #FFFFFF;\n      thead {\n        th {\n          text-align: center;\n          vertical-align: middle;\n        }\n      }\n      tbody {\n        tr {\n          td {\n            text-align: center;\n            vertical-align: middle;\n            .td-img {\n              max-width: 300px;\n            }\n            .onoffswitch {\n              position: relative; width: 60px;\n              -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\n              .onoffswitch-checkbox {\n                position: absolute;\n                opacity: 0;\n                pointer-events: none;\n              }\n              .onoffswitch-label {\n                display: block; overflow: hidden; cursor: pointer;\n                height: 36px; padding: 0; margin: 0px; line-height: 36px;\n                border: 2px solid #E3E3E3; border-radius: 36px;\n                background-color: #E3E3E3;\n                transition: background-color 0.3s ease-in;\n              }\n              .onoffswitch-label:before {\n                content: \"\";\n                display: block; width: 36px; margin: 0px;\n                background: #FFFFFF;\n                position: absolute; top: 0; bottom: 0;\n                right: 22px;\n                border: 2px solid #E3E3E3; border-radius: 36px;\n                transition: all 0.3s ease-in 0s;\n              }\n              .onoffswitch-checkbox.checked + .onoffswitch-label {\n                background-color: #49E845;\n              }\n              .onoffswitch-checkbox.checked + .onoffswitch-label,\n              .onoffswitch-checkbox.checked + .onoffswitch-label:before {\n                border-color: #49E845;\n              }\n              .onoffswitch-checkbox.checked + .onoffswitch-label:before {\n                right: 0px;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n.modal-content {\n    border-radius: 10px;\n}\n\n.img-wrapper {\n    padding: 10px;\n    width: 200px;\n    height: 100px;\n}\n.modal-img-wrapper {\n    padding: 10px;\n    width: 300px;\n    height: 180px;\n    max-width: 100%;\n    max-height: 100%;\n}\n.product-image {\n    max-width: 100%;\n    max-height: 100%;\n    border-radius: 10px;\n}\n.validation {\n    font-size: 10px;\n}\n.fa-times-circle {\n    cursor: pointer;\n}\n</style>\n"]}]}