{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Login.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Login.vue","mtime":1596553827856},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmh0bWwsCmJvZHkgewogIGhlaWdodDogMTAwdmg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CmJvZHkgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\n  <div>\n    <form class=\"form-signin\" @submit.prevent=\"signin\">\n      <h1 class=\"h3 mb-3 font-weight-normal\">\n        請先登入\n      </h1>\n      <div class=\"form-group\">\n        <label for=\"inputEmail\" class=\"sr-only\">Email address</label>\n        <input id=\"inputEmail\" v-model=\"user.email\" type=\"email\"\n          class=\"form-control\" placeholder=\"Email address\"\n          required autofocus>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n        <input id=\"inputPassword\" v-model=\"user.password\" type=\"password\" class=\"form-control\"\n          placeholder=\"Password\" required>\n      </div>\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\n        登入\n      </button>\n      <br>\n      <button class=\"btn btn-outline-primary btn-block\" type=\"button\" @click=\"signout\">\n        登出\n      </button>\n      <br>\n      <button class=\"btn btn-outline-primary btn-block\" type=\"button\" @click=\"getData\">\n        取得資料\n      </button>\n      <p class=\"mt-5 mb-3 text-muted\">\n        &copy; 2020~∞ - 六角學院\n      </p>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data () {\n    return {\n      user: {\n        email: '',\n        password: ''\n      },\n      token: ''\n    }\n  },\n  methods: {\n    signin () {\n      const api = `${process.env.VUE_APP_APIPATH}api/auth/login`\n      this.$http.post(api, this.user).then((response) => {\n        const { token } = response.data\n        const { expired } = response.data\n        // 寫入 cookie token\n        // expires 設置有效時間\n        document.cookie = `hexToken=${token};expires=${new Date(expired * 1000)};`\n        this.$router.push('/admin')\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n    signout () {\n      document.cookie = 'hexToken=;expires=;'\n      console.log('token 已清除')\n    },\n    getData () {\n      // 取得 token 的 cookies（注意取得的時間點）\n      // 詳情請見：https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie\n      this.token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\n      // API\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/products`\n      this.$http.defaults.headers.common.Authorization = `Bearer ${this.token}`\n      this.$http.get(api).then((response) => {\n        this.products = response.data.data\n        this.pagination = response.data.meta.pagination\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody {\n  height: 100vh;\n  text-align: center;\n}\nbody {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n"]}]}