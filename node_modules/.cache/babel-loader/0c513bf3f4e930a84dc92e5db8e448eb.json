{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/thread-loader/dist/cjs.js!/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/Checkout.vue","mtime":1596375671737},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgJCBmcm9tICdqcXVlcnknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NoZWNrb3V0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICB0ZWw6ICcnLAogICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgIHBheW1lbnQ6ICcnLAogICAgICAgIG1lc3NhZ2U6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBwcm9wczogewogICAgY2FydDoge30KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYXJ0VG90YWw6IGZ1bmN0aW9uIGNhcnRUb3RhbCgpIHsKICAgICAgdmFyIHRvdGFsID0gMDsKICAgICAgdGhpcy5jYXJ0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB0b3RhbCArPSBpdGVtLnByb2R1Y3QucHJpY2UgKiBpdGVtLnF1YW50aXR5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHRvdGFsOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYmFja1RvQ2FydDogZnVuY3Rpb24gYmFja1RvQ2FydCgpIHsKICAgICAgdGhpcy4kZW1pdCgnYmFja3RvY2FydCcpOwogICAgfSwKICAgIGNyZWF0ZU9yZGVyOiBmdW5jdGlvbiBjcmVhdGVPcmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coewogICAgICAgIGNvbnRhaW5lcjogdGhpcy4kcmVmcy5jaGVja291dCwKICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgIGlzRnVsbFBhZ2U6IHRydWUKICAgICAgfSk7CiAgICAgIHZhciB1cmwgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUQsICIvZWMvb3JkZXJzIik7CiAgICAgIHRoaXMuJGh0dHAucG9zdCh1cmwsIHRoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhLmlkKSB7CiAgICAgICAgICBPYmplY3Qua2V5cyhfdGhpcy5mb3JtKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGl0ZW0gPSAnJzsKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLiRyZWZzLmZvcm12YWxpZGF0aW9uLnJlc2V0KCk7CgogICAgICAgICAgX3RoaXMuJHJlZnMuY2hlY2tvdXRmb3JtLnJlc2V0KCk7CgogICAgICAgICAgJCgnI29yZGVyTW9kYWwnKS5tb2RhbCgnc2hvdycpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvJyk7CgogICAgICAgIF90aGlzLiRidXMuJGVtaXQoJ2NhcnRVcGRhdGUnLCB7CiAgICAgICAgICBjYXJ0OiB7fQogICAgICAgIH0pOwoKICAgICAgICBsb2FkZXIuaGlkZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CgogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnLycpOwoKICAgICAgICBsb2FkZXIuaGlkZSgpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA,OAAA,CAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,GAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA,EAJA;AAKA,QAAA,OAAA,EAAA,EALA;AAMA,QAAA,OAAA,EAAA;AANA;AADA,KAAA;AAUA,GAbA;AAcA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AADA,GAdA;AAiBA,EAAA,QAAA,EAAA;AACA,IAAA,SAAA,EAAA,qBAAA;AACA,UAAA,KAAA,GAAA,CAAA;AACA,WAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,IAAA,IAAA,CAAA,OAAA,CAAA,KAAA,GAAA,IAAA,CAAA,QAAA;AACA,OAFA;AAGA,aAAA,KAAA;AACA;AAPA,GAjBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,KAAA,CAAA,YAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AAAA;;AACA,UAAA,MAAA,GAAA,KAAA,QAAA,CAAA,IAAA,CAAA;AACA,QAAA,SAAA,EAAA,KAAA,KAAA,CAAA,QADA;AAEA,QAAA,OAAA,EAAA,CAFA;AAGA,QAAA,UAAA,EAAA;AAHA,OAAA,CAAA;AAKA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,iBAAA,OAAA,CAAA,GAAA,CAAA,YAAA,eAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,KAAA,IAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,EAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,EAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AAAA,YAAA,IAAA,GAAA,EAAA;AAAA,WAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,cAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,YAAA,CAAA,KAAA;;AACA,UAAA,CAAA,CAAA,aAAA,CAAA,CAAA,KAAA,CAAA,MAAA;AACA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,YAAA,EAAA;AACA,UAAA,IAAA,EAAA;AADA,SAAA;;AAGA,QAAA,MAAA,CAAA,IAAA;AACA,OAbA,EAaA,KAbA,CAaA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;;AACA,QAAA,MAAA,CAAA,IAAA;AACA,OAjBA;AAkBA;AA7BA;AA1BA,CAAA","sourcesContent":["<template>\n  <div class=\"checkout\" ref=\"checkout\">\n    <div class=\"router-wrapper mt-3\">\n        <i class=\"fas fa-chevron-left\" @click=\"backToCart\"></i>\n        <span class=\"mx-2 router\" @click=\"backToCart\">返回購物車</span>\n    </div>\n    <div class=\"my-5 cart-step-wrapper d-flex justify-content-center mx-auto\">\n      <div class=\"cart-step row\">\n        <div class=\"cart-step-icon\">1</div>\n        <div class=\"cart-step-text\">\n            <div>購買品項</div>\n        </div>\n        <div class=\"connector-line\"></div>\n      </div>\n      <div class=\"checkout-step row\">\n        <div class=\"checkout-step-icon\">2</div>\n        <div class=\"checkout-step-text\">填寫地址與結帳</div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"mt-5 col-4 offset-1 cart-summary\" v-if=\"cart.length\">\n        <div class=\"card cart-card mx-auto\">\n          <div class=\"card-header\">\n            訂單摘要\n          </div>\n          <div class=\"card-body d-flex flex-column\">\n            <ul class=\"list-group h-100\">\n              <li class=\"list-group-item d-flex justify-content-between\">\n                <span>商品總計</span>\n                <span>{{ cartTotal | priceFormat}}</span>\n              </li>\n              <li class=\"list-group-item d-flex justify-content-between\">\n                <span>運費總計</span>\n                <span>NT$ 0</span>\n              </li>\n              <div class=\"divider-wrapper\">\n                <div class=\"divider\"></div>\n              </div>\n              <div class=\"list-group-item d-flex w-100 mt-3\">\n                <div class=\"cart-total w-100 d-flex justify-content-between\">\n                    <span>結帳金額</span>\n                    <span>{{ cartTotal | priceFormat}}</span>\n                </div>\n              </div>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"mt-3 col-6 justify-content-center checkout-form\">\n        <validation-observer ref=\"formvalidation\" v-slot=\"{ invalid }\" class=\"col-md-6\">\n          <form ref=\"checkoutform\" @submit.prevent=\"createOrder\">\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"username\">收件人姓名</label>\n                <input id=\"username\" v-model=\"form.name\" type=\"text\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `收件人姓名${errors[0].slice(9, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"email\">Email</label>\n                <input id=\"email\" v-model=\"form.email\" type=\"email\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `Email${errors[0].slice(6, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider  v-slot=\"{ errors, classes }\" rules=\"required|numeric|min:8\">\n                <label for=\"tel\">電話</label>\n                <input id=\"tel\" v-model=\"form.tel\" type=\"tel\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `電話${errors[0].slice(4, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"address\">地址</label>\n                <input id=\"address\" v-model=\"form.address\" type=\"text\" class=\"form-control\" :class=\"classes\">\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `地址${errors[0].slice(8, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                <label for=\"message\">購買方式</label>\n                <select id=\"payment\" v-model=\"form.payment\" class=\"form-control\" :class=\"classes\" required>\n                  <option value=\"\" disabled>\n                    請選擇付款方式\n                  </option>\n                  <option value=\"WebATM\">\n                    WebATM\n                  </option>\n                  <option value=\"ATM\">\n                    ATM\n                  </option>\n                  <option value=\"CVS\">\n                    CVS\n                  </option>\n                  <option value=\"Barcode\">\n                    Barcode\n                  </option>\n                  <option value=\"Credit\">\n                    Credit\n                  </option>\n                  <option value=\"ApplePay\">\n                    ApplePay\n                  </option>\n                  <option value=\"GooglePay\">\n                    GooglePay\n                  </option>\n                </select>\n                <span v-if=\"errors[0]\" class=\"text-danger\">{{ `購買方式${errors[0].slice(8, errors[0].length)}` }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"message\">留言</label>\n              <textarea id=\"message\" v-model=\"form.message\" class=\"form-control\" cols=\"30\" rows=\"3\"></textarea>\n            </div>\n            <div class=\"text-right\">\n              <button type=\"submit\" class=\"btn checkout-submit\" :disabled=\"invalid\">\n                送出\n              </button>\n            </div>\n          </form>\n        </validation-observer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nexport default {\n  name: 'Checkout',\n  data () {\n    return {\n      form: {\n        name: '',\n        email: '',\n        tel: '',\n        address: '',\n        payment: '',\n        message: ''\n      }\n    }\n  },\n  props: {\n    cart: {}\n  },\n  computed: {\n    cartTotal: function () {\n      let total = 0\n      this.cart.forEach((item) => {\n        total += item.product.price * item.quantity\n      })\n      return total\n    }\n  },\n  methods: {\n    backToCart () {\n      this.$emit('backtocart')\n    },\n    createOrder () {\n      const loader = this.$loading.show({\n        container: this.$refs.checkout,\n        opacity: 1,\n        isFullPage: true\n      })\n      const url = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/ec/orders`\n      this.$http.post(url, this.form)\n        .then((response) => {\n          if (response.data.data.id) {\n            Object.keys(this.form).forEach(item => { item = '' })\n            this.$refs.formvalidation.reset()\n            this.$refs.checkoutform.reset()\n            $('#orderModal').modal('show')\n          }\n          this.$router.push('/')\n          this.$bus.$emit('cartUpdate', {\n            cart: {}\n          })\n          loader.hide()\n        }).catch((error) => {\n          console.log(error)\n          this.$router.push('/')\n          loader.hide()\n        })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.checkout{\n  margin-top: 80px;\n  height: 100%;\n  overflow: visible;\n  max-height: none;\n  max-width: 1140px;\n  background: #ffffff;\n  .router-wrapper {\n    .router {\n      width: 100%;\n      cursor: pointer;\n      color: #10567b;\n    }\n    .router:hover {\n      text-decoration: underline;\n    }\n    .fa-chevron-left {\n      cursor: pointer;\n      color: #2e90b7;\n    }\n  }\n  .cart-step-wrapper {\n    .cart-step {\n      width: 300px;\n      position: relative;\n    }\n    .cart-step-icon {\n        z-index: 999;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        background-color: #10567b;\n        color: #ffffff;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n    }\n    .cart-step-text {\n        padding-left: 15px;\n        padding-right: 10px;\n        z-index: 999;\n        background-color: #ffffff;\n        display: inline-block;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        height: 50px;\n    }\n    .checkout-step-icon {\n        z-index: 999;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        background-color: #10567b;\n        color: #ffffff;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n    }\n    .checkout-step-text {\n        padding-left: 15px;\n        padding-right: 10px;\n        z-index: 999;\n        background-color: #ffffff;\n        display: inline-block;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n        height: 50px;\n        color: #000000\n    }\n    .connector-line {\n        z-index: 1;\n        position: absolute;\n        left: 0;\n        top: 23px;\n        background-color: #10567b;\n        width: 100%;\n        height: 2px;\n        vertical-align: middle;\n    }\n  }\n  .checkout-form {\n    .checkout-submit {\n      color: #ffffff;\n      background-color: #10567b;\n      text-decoration: none;\n    }\n    .checkout-submit:hover, .checkout-submit:focus, .checkout-submit:active:hover {\n      color: #ffffff;\n      background-color: #092c3f;\n    }\n  }\n  .modal {\n    .modal-content {\n      border: 0 none;\n      border-radius: 10px;\n      .modal-body {\n        vertical-align: middle;\n        line-height: 72px;\n      }\n    }\n    .btn {\n      border-radius: 5px;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}