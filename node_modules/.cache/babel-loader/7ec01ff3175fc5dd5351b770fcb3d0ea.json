{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/ProductModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/ProductModal.vue","mtime":1596554804451},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0ZW1wUHJvZHVjdDogewogICAgICAgIGltYWdlVXJsOiBbXSwKICAgICAgICBlbmFibGVkOiBmYWxzZQogICAgICB9LAogICAgICBtb2RhbFZpZXc6IHsKICAgICAgICB0aXRsZTogJ+W7uueri+aWsOeUouWTgScsCiAgICAgICAgZW5nVG9aaDogewogICAgICAgICAgdGl0bGU6ICfmqJnpoYwnLAogICAgICAgICAgaWQ6ICdJZCcsCiAgICAgICAgICBjYXRlZ29yeTogJ+WIhumhnicsCiAgICAgICAgICB1bml0OiAn5Zau5L2NJywKICAgICAgICAgIG9yaWdpbl9wcmljZTogJ+WOn+WDuScsCiAgICAgICAgICBwcmljZTogJ+WDueagvCcsCiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+eUouWTgeaPj+i/sCcsCiAgICAgICAgICBjb250ZW50OiAn6Kqq5piO5YWn5a65JwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICB0b2tlbjogU3RyaW5nLAogICAgaXNOZXc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHVzZXI6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNsZWFyVGVtcFByb2R1Y3Q6IGZ1bmN0aW9uIGNsZWFyVGVtcFByb2R1Y3QoKSB7CiAgICAgIHRoaXMudGVtcFByb2R1Y3QgPSB7CiAgICAgICAgaW1hZ2VVcmw6IFtdLAogICAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgIH07CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgfSwKICAgIGdldFByb2R1Y3Q6IGZ1bmN0aW9uIGdldFByb2R1Y3QoaWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwoKICAgICAgaWYgKCF0aGlzLmlzTmV3KSB7CiAgICAgICAgdGhpcy5tb2RhbFZpZXcudGl0bGUgPSAn57eo6Lyv55Si5ZOBJzsKICAgICAgfQoKICAgICAgdmFyIGFwaSA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEgsICJhcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVVJRCwgIi9hZG1pbi9lYy9wcm9kdWN0LyIpLmNvbmNhdChpZCk7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KGFwaSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdzaG93Jyk7CiAgICAgICAgX3RoaXMudGVtcFByb2R1Y3QgPSByZXMuZGF0YS5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVByb2R1Y3Q6IGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3QocHJvZHVjdERhdGEpIHsKICAgICAgaWYgKHByb2R1Y3REYXRhKSB7CiAgICAgICAgdGhpcy50ZW1wUHJvZHVjdCA9IHByb2R1Y3REYXRhOwogICAgICB9CgogICAgICB2YXIgYXBpID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgImFwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlELCAiL2FkbWluL2VjL3Byb2R1Y3QiKTsKICAgICAgdmFyIGh0dHBNZXRob2QgPSAncG9zdCc7CgogICAgICBpZiAoIXRoaXMuaXNOZXcpIHsKICAgICAgICBhcGkgKz0gIi8iLmNvbmNhdCh0aGlzLnRlbXBQcm9kdWN0LmlkKTsKICAgICAgICBodHRwTWV0aG9kID0gJ3BhdGNoJzsKICAgICAgfQoKICAgICAgdGhpcy5heGlvc01ldGhvZChhcGksIGh0dHBNZXRob2QpOwogICAgfSwKICAgIGF4aW9zTWV0aG9kOiBmdW5jdGlvbiBheGlvc01ldGhvZCh1cmwsIG1ldGhvZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnKTsKICAgICAgdGhpcy4kaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gIkJlYXJlciAiLmNvbmNhdCh0aGlzLnRva2VuKTsKICAgICAgdGhpcy4kaHR0cFttZXRob2RdKHVybCwgdGhpcy50ZW1wUHJvZHVjdCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdoaWRlJyk7CgogICAgICAgIF90aGlzMi4kYnVzLiRlbWl0KCdwcm9kdWN0VXBkYXRlJywgewogICAgICAgICAgcHJvZHVjdDogX3RoaXMyLnRlbXBQcm9kdWN0CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi4kZW1pdCgnbG9hZGluZycpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ProductModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"productModal\" class=\"modal fade\" ref=\"productModal\">\n    <div class=\"modal-dialog modal-lg\" role=\"document\">\n      <validation-observer ref=\"form\" v-slot=\"{ invalid }\">\n        <form @submit.prevent=\"updateProduct(tempProduct)\">\n          <div class=\"modal-content border-0\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\">\n                {{ modalView.title }}\n              </h5>\n              <i class=\"fa fa-times-circle fa-2x\" data-dismiss=\"modal\"></i>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n                <div class=\"col-sm-4\">\n                  <div class=\"form-group\">\n                    <validation-provider v-slot=\"{ errors, classes }\" :rules=\"{ required: true, regex: /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/ }\">\n                      <label for=\"imageUrl\">輸入圖片網址</label>\n                      <input id=\"imageUrl\" v-model=\"tempProduct.imageUrl[0]\" type=\"text\" class=\"form-control\" :class=\"classes\"\n                        placeholder=\"請輸入圖片連結\">\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ `圖片連結${errors[0].slice(9, errors[0].length)}` }}</span>\n                    </validation-provider>\n                  </div>\n                  <div class=\"modal-img-wrapper text-center\">\n                    <img class=\"img-fluid product-image\" :src=\"tempProduct.imageUrl[0]\" alt>\n                  </div>\n                </div>\n                <div class=\"col-sm-8\">\n                  <div>\n                    <div class=\"form-row\">\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                          <label for=\"title\">標題</label>\n                          <input id=\"title\" v-model=\"tempProduct.title\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入標題\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `標題${errors[0].slice(6, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                          <label for=\"category\">分類</label>\n                          <input id=\"category\" v-model=\"tempProduct.category\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入分類\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `分類${errors[0].slice(9, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                    </div>\n                    <div class=\"form-row\">\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required|numeric\">\n                          <label for=\"origin_price\">原價</label>\n                          <input id=\"origin_price\" v-model=\"tempProduct.origin_price\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入原價\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `原價${errors[0].slice(13, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required|numeric\">\n                          <label for=\"price\">價格</label>\n                          <input id=\"price\" v-model=\"tempProduct.price\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入價格\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `價格${errors[0].slice(6, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                    </div>\n                    <div class=\"form-row\">\n                      <div class=\"form-group col-md-6\">\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\n                          <label for=\"unit\">單位</label>\n                          <input id=\"unit\" v-model=\"tempProduct.unit\" type=\"text\" class=\"form-control\" :class=\"classes\" placeholder=\"請輸入單位\">\n                          <span v-if=\"errors[0]\" class=\"text-danger\">{{ `單位${errors[0].slice(5, errors[0].length)}` }}</span>\n                        </validation-provider>\n                      </div>\n                      <div class=\"form-group col-md-6\">\n                        <label>id</label>\n                        <input type=\"text\" class=\"form-control\" v-model=\"tempProduct.id\" placeholder=\"自動產生\" disabled>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-12\">\n                  <div v-for=\"item in ['description', 'content']\" class=\"form-group\" :key=\"item\">\n                    <validation-provider v-slot=\"{ errors }\" rules=\"required\">\n                      <label :for=\"item\">{{ modalView.engToZh[item] }}</label>\n                      <textarea :id=\"item\" v-model=\"tempProduct[item]\" type=\"text\" class=\"form-control\"\n                        :placeholder=\"`請輸入${modalView.engToZh[item]}`\">\n                      </textarea>\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ `${modalView.engToZh[item]}${errors[0].slice(errors[0].length - 3, errors[0].length)}` }}</span>\n                    </validation-provider>\n                  </div>\n                  <div class=\"form-group\">\n                    <label class=\"form-check-label\" for=\"enabled\">是否啟用</label>\n                    <div class=\"mt-3\">\n                      <div class=\"form-check form-check-inline\">\n                        <input class=\"form-check-input\" type=\"radio\" :value=true v-model=\"tempProduct.enabled\">\n                        <label class=\"form-check-label\">啟用</label>\n                      </div>\n                      <div class=\"form-check form-check-inline\">\n                        <input class=\"form-check-input\" type=\"radio\" :value=false v-model=\"tempProduct.enabled\">\n                        <label class=\"form-check-label\">不啟用</label>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n                取消\n              </button>\n              <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"invalid\">\n                確認\n              </button>\n            </div>\n          </div>\n        </form>\n      </validation-observer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nexport default {\n  data () {\n    return {\n      tempProduct: {\n        imageUrl: [],\n        enabled: false\n      },\n      modalView: {\n        title: '建立新產品',\n        engToZh: {\n          title: '標題',\n          id: 'Id',\n          category: '分類',\n          unit: '單位',\n          origin_price: '原價',\n          price: '價格',\n          description: '產品描述',\n          content: '說明內容'\n        }\n      }\n    }\n  },\n  props: {\n    token: String,\n    isNew: {\n      type: Boolean,\n      default: true\n    },\n    user: {\n      type: Object,\n      default () {\n        return {\n        }\n      }\n    }\n  },\n  methods: {\n    clearTempProduct () {\n      this.tempProduct = { imageUrl: [], enabled: false }\n      this.$refs.form.reset()\n    },\n    getProduct (id) {\n      this.$refs.form.reset()\n      if (!this.isNew) {\n        this.modalView.title = '編輯產品'\n      }\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/product/${id}`\n      this.$http.get(api)\n        .then((res) => {\n          $('#productModal').modal('show')\n          this.tempProduct = res.data.data\n        }).catch((error) => {\n          console.log(error)\n        })\n    },\n    updateProduct (productData) {\n      if (productData) {\n        this.tempProduct = productData\n      }\n      let api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/product`\n      let httpMethod = 'post'\n      if (!this.isNew) {\n        api += `/${this.tempProduct.id}`\n        httpMethod = 'patch'\n      }\n      this.axiosMethod(api, httpMethod)\n    },\n    axiosMethod (url, method) {\n      this.$emit('loading')\n      this.$http.defaults.headers.common.Authorization = `Bearer ${this.token}`\n      this.$http[method](url, this.tempProduct)\n        .then(() => {\n          $('#productModal').modal('hide')\n          this.$bus.$emit('productUpdate', {\n            product: this.tempProduct\n          })\n          this.$emit('loading')\n        }).catch((error) => {\n          console.log(error)\n        })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.modal {\n  .modal-dialog {\n    .modal-content {\n      border-radius: 10px;\n      .modal-header {\n        .fa-times-circle {\n          cursor: pointer;\n        }\n      }\n      .modal-body {\n        text-align: left;\n        padding: 20px;\n        .modal-img-wrapper {\n          padding: 10px;\n          width: 300px;\n          height: 180px;\n          max-width: 100%;\n          max-height: 100%;\n          .product-image {\n            max-width: 100%;\n            max-height: 100%;\n            border-radius: 10px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/dashboard"}]}