{"remainingRequest":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/git/vue_cli_try/src/views/dashboard/Login.vue","mtime":1596553827856},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/git/vue_cli_try/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICB0b2tlbjogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaWduaW46IGZ1bmN0aW9uIHNpZ25pbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBhcGkgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiYXBpL2F1dGgvbG9naW4iKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KGFwaSwgdGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgdmFyIGV4cGlyZWQgPSByZXNwb25zZS5kYXRhLmV4cGlyZWQ7IC8vIOWvq+WFpSBjb29raWUgdG9rZW4KICAgICAgICAvLyBleHBpcmVzIOioree9ruacieaViOaZgumWkwoKICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiaGV4VG9rZW49Ii5jb25jYXQodG9rZW4sICI7ZXhwaXJlcz0iKS5jb25jYXQobmV3IERhdGUoZXhwaXJlZCAqIDEwMDApLCAiOyIpOwoKICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy9hZG1pbicpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIHNpZ25vdXQ6IGZ1bmN0aW9uIHNpZ25vdXQoKSB7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdoZXhUb2tlbj07ZXhwaXJlcz07JzsKICAgICAgY29uc29sZS5sb2coJ3Rva2VuIOW3sua4hemZpCcpOwogICAgfSwKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8g5Y+W5b6XIHRva2VuIOeahCBjb29raWVz77yI5rOo5oSP5Y+W5b6X55qE5pmC6ZaT6bue77yJCiAgICAgIC8vIOips+aDheiri+imi++8mmh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9jb29raWUKICAgICAgdGhpcy50b2tlbiA9IGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKC8oPzooPzpefC4qO1xzKiloZXhUb2tlblxzKj1ccyooW147XSopLiokKXxeLiokLywgJyQxJyk7IC8vIEFQSQoKICAgICAgdmFyIGFwaSA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEgsICJhcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVVJRCwgIi9hZG1pbi9lYy9wcm9kdWN0cyIpOwogICAgICB0aGlzLiRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KHRoaXMudG9rZW4pOwogICAgICB0aGlzLiRodHRwLmdldChhcGkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgIF90aGlzMi5wYWdpbmF0aW9uID0gcmVzcG9uc2UuZGF0YS5tZXRhLnBhZ2luYXRpb247CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,mBAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AAAA,YACA,KADA,GACA,QAAA,CAAA,IADA,CACA,KADA;AAAA,YAEA,OAFA,GAEA,QAAA,CAAA,IAFA,CAEA,OAFA,EAGA;AACA;;AACA,QAAA,QAAA,CAAA,MAAA,sBAAA,KAAA,sBAAA,IAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAPA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OATA;AAUA,KAbA;AAcA,IAAA,OAdA,qBAcA;AACA,MAAA,QAAA,CAAA,MAAA,GAAA,qBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA,KAjBA;AAkBA,IAAA,OAlBA,qBAkBA;AAAA;;AACA;AACA;AACA,WAAA,KAAA,GAAA,QAAA,CAAA,MAAA,CAAA,OAAA,CAAA,gDAAA,EAAA,IAAA,CAAA,CAHA,CAIA;;AACA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,iBAAA,OAAA,CAAA,GAAA,CAAA,YAAA,uBAAA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,aAAA,oBAAA,KAAA,KAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA;AACA,OAHA;AAIA;AA7BA;AAXA,CAAA","sourcesContent":["<template>\n  <div>\n    <form class=\"form-signin\" @submit.prevent=\"signin\">\n      <h1 class=\"h3 mb-3 font-weight-normal\">\n        請先登入\n      </h1>\n      <div class=\"form-group\">\n        <label for=\"inputEmail\" class=\"sr-only\">Email address</label>\n        <input id=\"inputEmail\" v-model=\"user.email\" type=\"email\"\n          class=\"form-control\" placeholder=\"Email address\"\n          required autofocus>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n        <input id=\"inputPassword\" v-model=\"user.password\" type=\"password\" class=\"form-control\"\n          placeholder=\"Password\" required>\n      </div>\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\n        登入\n      </button>\n      <br>\n      <button class=\"btn btn-outline-primary btn-block\" type=\"button\" @click=\"signout\">\n        登出\n      </button>\n      <br>\n      <button class=\"btn btn-outline-primary btn-block\" type=\"button\" @click=\"getData\">\n        取得資料\n      </button>\n      <p class=\"mt-5 mb-3 text-muted\">\n        &copy; 2020~∞ - 六角學院\n      </p>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data () {\n    return {\n      user: {\n        email: '',\n        password: ''\n      },\n      token: ''\n    }\n  },\n  methods: {\n    signin () {\n      const api = `${process.env.VUE_APP_APIPATH}api/auth/login`\n      this.$http.post(api, this.user).then((response) => {\n        const { token } = response.data\n        const { expired } = response.data\n        // 寫入 cookie token\n        // expires 設置有效時間\n        document.cookie = `hexToken=${token};expires=${new Date(expired * 1000)};`\n        this.$router.push('/admin')\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n    signout () {\n      document.cookie = 'hexToken=;expires=;'\n      console.log('token 已清除')\n    },\n    getData () {\n      // 取得 token 的 cookies（注意取得的時間點）\n      // 詳情請見：https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie\n      this.token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\n      // API\n      const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_UUID}/admin/ec/products`\n      this.$http.defaults.headers.common.Authorization = `Bearer ${this.token}`\n      this.$http.get(api).then((response) => {\n        this.products = response.data.data\n        this.pagination = response.data.meta.pagination\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody {\n  height: 100vh;\n  text-align: center;\n}\nbody {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n"],"sourceRoot":"src/views/dashboard"}]}