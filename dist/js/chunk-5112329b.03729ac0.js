(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5112329b"],{2532:function(t,e,r){"use strict";var n=r("23e7"),i=r("5a34"),s=r("1d80"),o=r("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(s(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"home",staticClass:"home mx-auto"},[r("div",{ref:"overlay-loading",staticClass:"overlay-loading"}),r("div",{staticClass:"search"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-3 col-lg-2 category-wrapper"},[r("div",{staticClass:"side-category"},[r("div",{staticClass:"title"},[t._v("商品分類")]),r("ul",{staticClass:"list-group list-group-flush"},[r("div",{staticClass:"back",on:{click:function(e){return t.$router.push("/products")}}},[r("i",{staticClass:"fas fa-angle-left"}),r("span",{staticClass:"text"},[t._v("所有分類")])])])])]),0===t.products.length?r("div",{staticClass:"col-12 col-md-9 col-lg-10 notFound"},[r("div",{staticClass:"title-wrapper"},[r("div",{staticClass:"title"},[t._v(t._s('找不到與"'+t.$route.query.key+'"相關的商品'))])]),r("div",{staticClass:"button-wrapper"},[r("button",{staticClass:"btn",on:{click:function(e){return t.$router.push("/products")}}},[t._v("探索更多商品")])])]):t._e(),t.products.length>0?r("div",{staticClass:"col-12 col-md-9 col-lg-10 card-decks-wrapper d-flex flex-column justify-content-center",class:{"only-one":t.products.length<=t.numCardsRow}},[r("div",{staticClass:"title"},[t._v(t._s("找到 "+t.products.length+' 件"'+t.$route.query.key+'"的商品'))]),t._l(5,(function(e){return r("div",{key:"row_"+e},[t.products.slice((e-1)*t.numCardsRow,e*t.numCardsRow).length>0?r("div",{staticClass:"card-deck"},[t._l(t.products.slice((e-1)*t.numCardsRow,e*t.numCardsRow),(function(e){return r("div",{key:e.id,staticClass:"card my-5",attrs:{id:e.id},on:{click:function(r){return t.$router.push("/product/"+e.id)}}},[r("div",{staticClass:"img-wrapper"},[r("div",{staticClass:"card-img-top",style:"background: url("+e.imageUrl[0]+") no-repeat center/contain;"})]),r("div",{directives:[{name:"show",rawName:"v-show",value:.85>e.price/e.origin_price,expression:"0.85 > item.price/item.origin_price"}],staticClass:"discount-badge"},[t._v(t._s(10*(e.price/e.origin_price).toFixed(1)+" 折")+" ")]),r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-content"},[r("p",{staticClass:"card-title"},[t._v(t._s(e.title))]),r("div",{staticClass:"rating w-100 d-flex align-items-center"},[t._l(e.rating.rate,(function(t,e){return r("span",{key:e,staticClass:"star-item",class:t})})),r("span",{staticClass:"count"},[t._v(t._s("("+e.rating.count+")"))])],2),r("div",{staticClass:"price-wrapper"},[r("span",{staticClass:"price"},[t._v(t._s(t._f("priceFormat")(e.price)))]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.origin_price>e.price,expression:"item.origin_price > item.price"}],staticClass:"original-price"},[t._v(t._s(t._f("priceFormat")(e.origin_price)))])])])]),t.windowWidth>=992?r("b-popover",{ref:"popover-"+e.id,refInFor:!0,attrs:{target:e.id,triggers:"hover focus",placement:"right"}},[r("div",{staticClass:"popper-wrapper"},[r("div",{staticClass:"popper-title"},[t._v(" "+t._s(e.title)+" ")]),e.options.event?t._e():r("div",[r("span",{staticClass:"btn btn-light popper-badge",on:{click:function(r){return t.$router.push("/search?key="+e.options.subcategory)}}},[t._v(" "+t._s(e.options.subcategory)+" ")])]),e.options.event?r("div",[r("span",{staticClass:"btn btn-light popper-badge",on:{click:function(r){return t.$router.push("/search?key="+e.options.subcategory)}}},[t._v(" "+t._s(e.options.subcategory)+" ")]),t._l(e.options.event.split(" "),(function(e,n){return r("span",{key:"event_"+n,staticClass:"btn btn-light popper-badge",on:{click:function(r){return t.$router.push("/search?key="+e)}}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),r("div",{staticClass:"popper-content"},[r("div",{domProps:{innerHTML:t._s(e.content)}})]),r("div",{staticClass:"popper-star"},t._l(e.rating.rate,(function(t,e){return r("span",{key:e,staticClass:"star-item",class:t})})),0),r("div",{staticClass:"popper-price"},[r("span",{staticClass:"price"},[t._v(t._s(t._f("priceFormat")(e.price)))]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.origin_price>e.price,expression:"item.origin_price > item.price"}],staticClass:"original-price"},[t._v(t._s(t._f("priceFormat")(e.origin_price)))])]),t.cartId.includes(e.id)?t._e():r("div",{staticClass:"btn d-flex justify-content-center mt-3 mb-3",class:{addToCart:!t.cartId.includes(e.id),goToCheckout:t.cartId.includes(e.id)},on:{click:function(r){return t.addToCart(e)}}},[r("span",[t._v("放入購物車")])]),t.cartId.includes(e.id)?r("div",{staticClass:"btn d-flex justify-content-center mt-3 mb-3",class:{addToCart:!t.cartId.includes(e.id),goToCheckout:t.cartId.includes(e.id)},on:{click:function(e){return t.$router.push("/cart")}}},[r("span",[t._v("立刻結帳")])]):t._e()])]):t._e()],1)})),t._l(t.numCardsRow-t.products.slice((e-1)*t.numCardsRow,e*t.numCardsRow).length,(function(t){return r("div",{key:"surplus_"+t,staticClass:"card my-5 border-0 no-use"})}))],2):t._e()])}))],2):t._e()])])])},i=[],s=(r("99af"),r("4de4"),r("4160"),r("caad"),r("d81d"),r("a9e3"),r("d3b7"),r("ac1f"),r("6062"),r("2532"),r("3ca3"),r("1276"),r("159b"),r("ddb0"),r("6b75"));function o(t){if(Array.isArray(t))return Object(s["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var c=r("06c5");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return o(t)||a(t)||Object(c["a"])(t)||u()}var l=r("3828"),p=(r("bbe3"),{name:"search",data:function(){return{products:[],cart:{},randomRating:{rate:[],count:Number},windowWidth:window.innerWidth}},components:{"b-popover":l["a"]},computed:{cartId:function(){return this.cart.length>0?this.cart.map((function(t){return t.product.id})):[]},numCardsRow:function(){return this.windowWidth>=576&&this.windowWidth<992?3:this.windowWidth>=992?4:2}},mounted:function(){var t=this;this.getProducts(),this.getCart(),window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth}))},beforeRouteUpdate:function(t,e,r){r(),this.getProducts()},methods:{getProducts:function(t){var e=this,r=this.$loading.show({container:this.$refs.overlayLoading,isFullPage:!0,opacity:1},{default:this.$createElement("MyLoading")}),n="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/products");this.$http.get(n).then((function(t){var n;e.products=t.data.data;var i=e.products.filter((function(t){return!(!t.options.event||0===t.options.event.length)}));e.products=e.products.filter((function(t){return t.title.includes(e.$route.query.key)||t.options.subcategory.includes(e.$route.query.key)})),(n=e.products).push.apply(n,d(i.filter((function(t){return t.options.event.split(" ").includes(e.$route.query.key)}))));var s=d(new Set(e.products.map((function(t){return t.id}))));e.products=e.products.filter((function(t){return s.includes(t.id)})),e.products.forEach((function(t){t.rating=e.rating()})),r.hide()}))},getCart:function(t){var e=this,r="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/shopping");this.$http.get(r).then((function(r){e.cart=r.data.data,t&&t.hide()}))},addToCart:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.$loading.show({container:this.$refs.overlayLoading,isFullPage:!0,opacity:1},{default:this.$createElement("MyLoading")}),i="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/shopping"),s={product:t.id,quantity:r};this.$http.post(i,s).then((function(){e.getCart(n),e.$refs["popover-".concat(t.id)][0].$emit("close")})).catch((function(t){console.log(t)}))},rating:function(){for(var t={rate:[],count:0},e=Math.floor(2.5*(2.5+2*Math.random()))/2,r=0;r<Math.floor(e);r++)t.rate.push("on");e%1!==0&&t.rate.push("half");while(t.rate.length<5)t.rate.push("off");return t.count=Math.floor(50+500*Math.random()),t}}}),f=p,v=(r("3de7"),r("2877")),h=Object(v["a"])(f,n,i,!1,null,null,null);e["default"]=h.exports},"3de7":function(t,e,r){"use strict";var n=r("c371"),i=r.n(n);i.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),i=r("5899"),s="["+i+"]",o=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),c=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(a,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(t,e,r){var n=r("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},6062:function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,r){"use strict";var n=r("9bf2").f,i=r("7c73"),s=r("e2cc"),o=r("0366"),a=r("19aa"),c=r("2266"),u=r("7dd0"),d=r("2626"),l=r("83ab"),p=r("f183").fastKey,f=r("69f3"),v=f.set,h=f.getterFor;t.exports={getConstructor:function(t,e,r,u){var d=t((function(t,n){a(t,d,e),v(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=n&&c(n,t[u],t,r)})),f=h(e),g=function(t,e,r){var n,i,s=f(t),o=b(t,e);return o?o.value=r:(s.last=o={index:i=p(e,!0),key:e,value:r,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=o),n&&(n.next=o),l?s.size++:t.size++,"F"!==i&&(s.index[i]=o)),t},b=function(t,e){var r,n=f(t),i=p(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return s(d.prototype,{clear:function(){var t=this,e=f(t),r=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,r=f(e),n=b(e,t);if(n){var i=n.next,s=n.previous;delete r.index[n.index],n.removed=!0,s&&(s.next=i),i&&(i.previous=s),r.first==n&&(r.first=i),r.last==n&&(r.last=s),l?r.size--:e.size--}return!!n},forEach:function(t){var e,r=f(this),n=o(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!b(this,t)}}),s(d.prototype,r?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),l&&n(d.prototype,"size",{get:function(){return f(this).size}}),d},setStrong:function(t,e,r){var n=e+" Iterator",i=h(e),s=h(n);u(t,e,(function(t,e){v(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=s(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),d(e)}}},"6d61":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),s=r("94ca"),o=r("6eeb"),a=r("f183"),c=r("2266"),u=r("19aa"),d=r("861d"),l=r("d039"),p=r("1c7e"),f=r("d44e"),v=r("7156");t.exports=function(t,e,r){var h=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),b=h?"set":"add",y=i[t],m=y&&y.prototype,w=y,C={},_=function(t){var e=m[t];o(m,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(s(t,"function"!=typeof y||!(g||m.forEach&&!l((function(){(new y).entries().next()})))))w=r.getConstructor(e,t,h,b),a.REQUIRED=!0;else if(s(t,!0)){var x=new w,k=x[b](g?{}:-0,1)!=x,I=l((function(){x.has(1)})),E=p((function(t){new y(t)})),$=!g&&l((function(){var t=new y,e=5;while(e--)t[b](e,e);return!t.has(-0)}));E||(w=e((function(e,r){u(e,w,t);var n=v(new y,e,w);return void 0!=r&&c(r,n[b],n,h),n})),w.prototype=m,m.constructor=w),(I||$)&&(_("delete"),_("has"),h&&_("get")),($||k)&&_(b),g&&m.clear&&delete m.clear}return C[t]=w,n({global:!0,forced:w!=y},C),f(w,t),g||r.setStrong(w,t,h),w}},7156:function(t,e,r){var n=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var s,o;return i&&"function"==typeof(s=e.constructor)&&s!==r&&n(o=s.prototype)&&o!==r.prototype&&i(t,o),t}},a9e3:function(t,e,r){"use strict";var n=r("83ab"),i=r("da84"),s=r("94ca"),o=r("6eeb"),a=r("5135"),c=r("c6b6"),u=r("7156"),d=r("c04e"),l=r("d039"),p=r("7c73"),f=r("241c").f,v=r("06cf").f,h=r("9bf2").f,g=r("58a8").trim,b="Number",y=i[b],m=y.prototype,w=c(p(m))==b,C=function(t){var e,r,n,i,s,o,a,c,u=d(t,!1);if("string"==typeof u&&u.length>2)if(u=g(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(s=u.slice(2),o=s.length,a=0;a<o;a++)if(c=s.charCodeAt(a),c<48||c>i)return NaN;return parseInt(s,n)}return+u};if(s(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var _,x=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof x&&(w?l((function(){m.valueOf.call(r)})):c(r)!=b)?u(new y(C(e)),r,x):C(e)},k=n?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;k.length>I;I++)a(y,_=k[I])&&!a(x,_)&&h(x,_,v(y,_));x.prototype=m,m.constructor=x,o(i,b,x)}},ab13:function(t,e,r){var n=r("b622"),i=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(n){}}return!1}},bb2f:function(t,e,r){var n=r("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c371:function(t,e,r){},caad:function(t,e,r){"use strict";var n=r("23e7"),i=r("4d64").includes,s=r("44d2"),o=r("ae40"),a=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!a},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},f183:function(t,e,r){var n=r("d012"),i=r("861d"),s=r("5135"),o=r("9bf2").f,a=r("90e3"),c=r("bb2f"),u=a("meta"),d=0,l=Object.isExtensible||function(){return!0},p=function(t){o(t,u,{value:{objectID:"O"+ ++d,weakData:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,u)){if(!l(t))return"F";if(!e)return"E";p(t)}return t[u].objectID},v=function(t,e){if(!s(t,u)){if(!l(t))return!0;if(!e)return!1;p(t)}return t[u].weakData},h=function(t){return c&&g.REQUIRED&&l(t)&&!s(t,u)&&p(t),t},g=t.exports={REQUIRED:!1,fastKey:f,getWeakData:v,onFreeze:h};n[u]=!0}}]);
//# sourceMappingURL=chunk-5112329b.03729ac0.js.map