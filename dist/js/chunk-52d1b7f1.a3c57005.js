(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52d1b7f1"],{"07ac":function(t,a,i){var e=i("23e7"),s=i("6f53").values;e({target:"Object",stat:!0},{values:function(t){return s(t)}})},"13d5":function(t,a,i){"use strict";var e=i("23e7"),s=i("d58f").left,r=i("a640"),n=i("ae40"),c=r("reduce"),o=n("reduce",{1:0});e({target:"Array",proto:!0,forced:!c||!o},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"6f53":function(t,a,i){var e=i("83ab"),s=i("df75"),r=i("fc6a"),n=i("d1e7").f,c=function(t){return function(a){var i,c=r(a),o=s(c),l=o.length,d=0,u=[];while(l>d)i=o[d++],e&&!n.call(c,i)||u.push(t?[i,c[i]]:c[i]);return u}};t.exports={entries:c(!0),values:c(!1)}},7277:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"dashboard"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"sidebar-wrapper"},[t._m(0),i("div",{staticClass:"list-group"},[i("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/"}},[t._v("首頁")]),i("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/products"}},[t._v("產品列表")]),i("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/orders"}},[t._v("訂單列表")]),i("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/coupons"}},[t._v("優惠券列表")]),i("router-link",{staticClass:"list-group-item",attrs:{to:"/admin/storages"}},[t._v("圖片列表")])],1)]),i("div",{staticClass:"content-wrapper"},[i("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[i("div",{staticClass:"collapse navbar-collapse"},[i("ul",{staticClass:"navbar-nav ml-auto mt-2 mt-lg-0 mr-5"},[i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("回到前台")])],1),i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[t._v("登出")])])])])]),i("div",{staticClass:"router-view-wrapper"},["/admin/"===this.$route.path?i("div",{staticClass:"report-wrapper"},[i("loading",{attrs:{active:t.isLoading,loader:"bars","is-full-page":!1,opacity:1,"background-color":"#e5e5e5"},on:{"update:active":function(a){t.isLoading=a}}}),i("div",{staticClass:"report d-flex flex-column justify-content-center"},[i("div",{staticClass:"row"},[i("div",{staticClass:"report-item overview"},[i("div",{staticClass:"section"},[i("div",{staticClass:"title"},[t._v("總營收")]),i("div",{staticClass:"content"},[t._v(t._s(t._f("priceFormat")(t.totalEarning)))])]),i("div",{staticClass:"section"},[i("div",{staticClass:"title"},[t._v("銷貨數量")]),i("div",{staticClass:"content"},[t._v(t._s(t.productsNum)+" "),i("span",{staticClass:"unit"},[t._v("件")])])])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"report-item"},[i("div",{staticClass:"title"},[t._v(" 付款情形 ")]),i("div",{staticClass:"diagram d-flex justify-content-center align-items-center"},[i("pie-chart",{attrs:{donut:!0,data:t.paidStatus,colors:["#00b5e9","#fa4251"]}})],1)]),i("div",{staticClass:"report-item"},[i("div",{staticClass:"title"},[t._v(" 營業收入 ")]),t.earning?i("div",{staticClass:"diagram d-flex justify-content-center align-items-center"},[i("area-chart",{staticClass:"chart",attrs:{data:t.earning,colors:["#63c76a"]}})],1):t._e()])]),i("div",{staticClass:"row"},[i("div",{staticClass:"report-item"},[i("div",{staticClass:"title"},[t._v(" 訂單數量 ")]),t.ordersNum?i("div",{staticClass:"diagram d-flex justify-content-center align-items-center"},[i("area-chart",{staticClass:"chart",attrs:{data:t.ordersNum,colors:["#3f5efb"]}})],1):t._e()]),i("div",{staticClass:"report-item"},[i("div",{staticClass:"title"},[t._v(" 支付來源 ")]),t.paidBy?i("div",{staticClass:"diagram d-flex justify-content-center align-items-center"},[i("column-chart",{attrs:{data:t.paidBy,colors:["#a8a8ab"]}})],1):t._e()])])])],1):t._e(),t.checkSuccess?i("router-view",{attrs:{token:t.token}}):t._e()],1)])])])},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"sidebar-heading text-align-center"},[i("div",{staticClass:"logo"})])}],r=(i("99af"),i("4160"),i("13d5"),i("fb6a"),i("07ac"),i("ac1f"),i("5319"),i("159b"),{name:"Dashboard",data:function(){return{token:"",checkSuccess:!1,isLoading:!1,orders:[],ordersNum:{},productsNum:0,earning:{},paidStatus:{},paidBy:[]}},computed:{totalEarning:function(){return this.earning?Math.round(Object.values(this.earning).reduce((function(t,a){return t+a}),0)):0}},created:function(){this.checkLogin(),this.getOrders()},methods:{checkLogin:function(){var t=this;this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.$http.defaults.headers.common.Authorization="Bearer ".concat(this.token);var a="".concat("https://course-ec-api.hexschool.io/","api/auth/check");this.$http.post(a,{api_token:this.token}).then((function(a){a.data.success&&(t.checkSuccess=!0)})).catch((function(a){console.log(a),t.$router.push("/login")}))},signout:function(){document.cookie="hexToken=;expires=;",console.log("token 已清除"),this.$router.push("/login")},getOrders:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/admin/ec/orders");this.$http.get(a).then((function(a){t.orders=a.data.data,t.draw(),t.isLoading=!1}))},draw:function(){var t=this,a={},i={},e={paid:0,unpaid:0},s={};this.orders.forEach((function(r){var n=r.created.datetime.slice(0,10);n in a?(a[n]+=1,i[n]+=r.amount):(a[n]=1,i[n]=r.amount),r.paid?e.paid+=1:e.unpaid+=1,r.payment in s?s[r.payment]+=1:s[r.payment]=1,r.products.forEach((function(a){t.productsNum+=a.quantity}))})),this.ordersNum=a,this.earning=i,this.paidStatus=e,this.paidBy=s}}}),n=r,c=(i("b985"),i("2877")),o=Object(c["a"])(n,e,s,!1,null,null,null);a["default"]=o.exports},8418:function(t,a,i){"use strict";var e=i("c04e"),s=i("9bf2"),r=i("5c6c");t.exports=function(t,a,i){var n=e(a);n in t?s.f(t,n,r(0,i)):t[n]=i}},"99af":function(t,a,i){"use strict";var e=i("23e7"),s=i("d039"),r=i("e8b5"),n=i("861d"),c=i("7b0b"),o=i("50c4"),l=i("8418"),d=i("65f0"),u=i("1dde"),f=i("b622"),v=i("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",m=v>=51||!s((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),C=u("concat"),b=function(t){if(!n(t))return!1;var a=t[p];return void 0!==a?!!a:r(t)},k=!m||!C;e({target:"Array",proto:!0,forced:k},{concat:function(t){var a,i,e,s,r,n=c(this),u=d(n,0),f=0;for(a=-1,e=arguments.length;a<e;a++)if(r=-1===a?n:arguments[a],b(r)){if(s=o(r.length),f+s>h)throw TypeError(g);for(i=0;i<s;i++,f++)i in r&&l(u,f,r[i])}else{if(f>=h)throw TypeError(g);l(u,f++,r)}return u.length=f,u}})},b985:function(t,a,i){"use strict";var e=i("de7f"),s=i.n(e);s.a},d58f:function(t,a,i){var e=i("1c0b"),s=i("7b0b"),r=i("44ad"),n=i("50c4"),c=function(t){return function(a,i,c,o){e(i);var l=s(a),d=r(l),u=n(l.length),f=t?u-1:0,v=t?-1:1;if(c<2)while(1){if(f in d){o=d[f],f+=v;break}if(f+=v,t?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:u>f;f+=v)f in d&&(o=i(o,d[f],f,l));return o}};t.exports={left:c(!1),right:c(!0)}},de7f:function(t,a,i){},fb6a:function(t,a,i){"use strict";var e=i("23e7"),s=i("861d"),r=i("e8b5"),n=i("23cb"),c=i("50c4"),o=i("fc6a"),l=i("8418"),d=i("b622"),u=i("1dde"),f=i("ae40"),v=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),g=[].slice,m=Math.max;e({target:"Array",proto:!0,forced:!v||!p},{slice:function(t,a){var i,e,d,u=o(this),f=c(u.length),v=n(t,f),p=n(void 0===a?f:a,f);if(r(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?s(i)&&(i=i[h],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return g.call(u,v,p);for(e=new(void 0===i?Array:i)(m(p-v,0)),d=0;v<p;v++,d++)v in u&&l(e,d,u[v]);return e.length=d,e}})}}]);
//# sourceMappingURL=chunk-52d1b7f1.a3c57005.js.map