(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1855d413"],{2532:function(t,e,r){"use strict";var n=r("23e7"),i=r("5a34"),o=r("1d80"),s=r("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"home",staticClass:"home mx-auto"},[r("div",{ref:"overlay-loading",staticClass:"overlay-loading"}),r("div",{staticClass:"search"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-3 col-lg-2 category-wrapper"},[r("div",{staticClass:"side-category"},[r("div",{staticClass:"title"},[t._v("商品分類")]),r("ul",{staticClass:"list-group list-group-flush"},[r("div",{staticClass:"back",on:{click:function(e){return t.$router.push("/products")}}},[r("i",{staticClass:"fas fa-angle-left"}),r("span",{staticClass:"text"},[t._v("所有分類")])])])])]),0===t.products.length?r("div",{staticClass:"col-12 col-md-9 col-lg-10 notFound"},[r("div",{staticClass:"title-wrapper"},[r("div",{staticClass:"title"},[t._v(t._s('找不到與"'+t.$route.query.key+'"相關的商品'))])]),r("div",{staticClass:"button-wrapper"},[r("button",{staticClass:"btn",on:{click:function(e){return t.$router.push("/products")}}},[t._v("探索更多商品")])])]):t._e(),t.products.length>0?r("div",{staticClass:"col-12 col-md-9 col-lg-10 card-decks-wrapper d-flex flex-column justify-content-center",class:{"only-one":t.products.length<=t.numCardsRow}},[r("div",{staticClass:"title"},[t._v(t._s("找到 "+t.products.length+' 件"'+t.$route.query.key+'"的商品'))]),t._l(Math.ceil(t.products.length/t.numCardsRow),(function(e){return r("div",{key:"row_"+e},[t.products.slice((e-1)*t.numCardsRow,e*t.numCardsRow).length>0?r("div",{staticClass:"card-deck"},[t._l(t.products.slice((e-1)*t.numCardsRow,e*t.numCardsRow),(function(e){return r("div",{key:e.id,staticClass:"card my-5",attrs:{id:e.id},on:{click:function(r){return t.$router.push("/product/"+e.id)}}},[r("div",{staticClass:"img-wrapper"},[r("div",{staticClass:"card-img-top",style:"background: url("+e.imageUrl[0]+") no-repeat center/contain;"})]),r("div",{directives:[{name:"show",rawName:"v-show",value:.85>e.price/e.origin_price,expression:"0.85 > item.price/item.origin_price"}],staticClass:"discount-badge"},[t._v(t._s(10*(e.price/e.origin_price).toFixed(1)+" 折")+" ")]),r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-content"},[r("p",{staticClass:"card-title"},[t._v(t._s(e.title))]),r("div",{staticClass:"rating w-100 d-flex align-items-center"},[t._l(e.rating.rate,(function(t,e){return r("span",{key:e,staticClass:"star-item",class:t})})),r("span",{staticClass:"count"},[t._v(t._s("("+e.rating.count+")"))])],2),r("div",{staticClass:"price-wrapper"},[r("span",{staticClass:"price"},[t._v(t._s(t._f("priceFormat")(e.price)))]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.origin_price>e.price,expression:"item.origin_price > item.price"}],staticClass:"original-price"},[t._v(t._s(t._f("priceFormat")(e.origin_price)))])])])]),r("popover",{attrs:{product:e,windowWidth:t.windowWidth,cartId:t.cartId},on:{getCart:t.getCart}})],1)})),t._l(t.numCardsRow-t.products.slice((e-1)*t.numCardsRow,e*t.numCardsRow).length,(function(t){return r("div",{key:"surplus_"+t,staticClass:"card my-5 border-0 no-use"})}))],2):t._e()])}))],2):t._e()])])])},i=[],o=(r("99af"),r("4de4"),r("4160"),r("caad"),r("d81d"),r("a9e3"),r("d3b7"),r("ac1f"),r("6062"),r("2532"),r("3ca3"),r("1276"),r("159b"),r("ddb0"),r("6b75"));function s(t){if(Array.isArray(t))return Object(o["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var c=r("06c5");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return s(t)||a(t)||Object(c["a"])(t)||u()}var l=r("cc8d"),f={name:"search",data:function(){return{products:[],cart:{},randomRating:{rate:[],count:Number},windowWidth:window.innerWidth}},components:{popover:l["a"]},computed:{cartId:function(){return this.cart.length>0?this.cart.map((function(t){return t.product.id})):[]},numCardsRow:function(){return this.windowWidth>=576&&this.windowWidth<992?3:this.windowWidth>=992?4:2}},mounted:function(){var t=this;this.getProducts(),this.getCart(),window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth}))},beforeRouteUpdate:function(t,e,r){r(),this.getProducts()},methods:{getProducts:function(t){var e=this,r=this.$loading.show({container:this.$refs.overlayLoading,isFullPage:!0,opacity:1},{default:this.$createElement("MyLoading")}),n="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/products?paged=999");this.$http.get(n).then((function(t){var n;e.products=t.data.data;var i=e.products.filter((function(t){return!(!t.options.event||0===t.options.event.length)}));e.products=e.products.filter((function(t){return t.title.includes(e.$route.query.key)||t.options.subcategory.includes(e.$route.query.key)})),(n=e.products).push.apply(n,d(i.filter((function(t){return t.options.event.split(" ").includes(e.$route.query.key)}))));var o=d(new Set(e.products.map((function(t){return t.id}))));e.products=e.products.filter((function(t){return o.includes(t.id)})),e.products.forEach((function(t){t.rating=e.rating()})),r.hide()}))},getCart:function(t){var e=this,r="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/shopping");this.$http.get(r).then((function(r){e.cart=r.data.data,t&&t.hide()}))},rating:function(){for(var t={rate:[],count:0},e=Math.floor(2.5*(2.5+2*Math.random()))/2,r=0;r<Math.floor(e);r++)t.rate.push("on");e%1!==0&&t.rate.push("half");while(t.rate.length<5)t.rate.push("off");return t.count=Math.floor(50+500*Math.random()),t}}},p=f,v=(r("3de7"),r("2877")),h=Object(v["a"])(p,n,i,!1,null,null,null);e["default"]=h.exports},"3de7":function(t,e,r){"use strict";var n=r("c371"),i=r.n(n);i.a},"5a34":function(t,e,r){var n=r("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},6062:function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,r){"use strict";var n=r("9bf2").f,i=r("7c73"),o=r("e2cc"),s=r("0366"),a=r("19aa"),c=r("2266"),u=r("7dd0"),d=r("2626"),l=r("83ab"),f=r("f183").fastKey,p=r("69f3"),v=p.set,h=p.getterFor;t.exports={getConstructor:function(t,e,r,u){var d=t((function(t,n){a(t,d,e),v(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=n&&c(n,t[u],t,r)})),p=h(e),g=function(t,e,r){var n,i,o=p(t),s=w(t,e);return s?s.value=r:(o.last=s={index:i=f(e,!0),key:e,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),l?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t},w=function(t,e){var r,n=p(t),i=f(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return o(d.prototype,{clear:function(){var t=this,e=p(t),r=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,r=p(e),n=w(e,t);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),l?r.size--:e.size--}return!!n},forEach:function(t){var e,r=p(this),n=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!w(this,t)}}),o(d.prototype,r?{get:function(t){var e=w(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),l&&n(d.prototype,"size",{get:function(){return p(this).size}}),d},setStrong:function(t,e,r){var n=e+" Iterator",i=h(e),o=h(n);u(t,e,(function(t,e){v(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),d(e)}}},"6d61":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("94ca"),s=r("6eeb"),a=r("f183"),c=r("2266"),u=r("19aa"),d=r("861d"),l=r("d039"),f=r("1c7e"),p=r("d44e"),v=r("7156");t.exports=function(t,e,r){var h=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),w=h?"set":"add",m=i[t],y=m&&m.prototype,b=m,C={},x=function(t){var e=y[t];s(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(o(t,"function"!=typeof m||!(g||y.forEach&&!l((function(){(new m).entries().next()})))))b=r.getConstructor(e,t,h,w),a.REQUIRED=!0;else if(o(t,!0)){var _=new b,k=_[w](g?{}:-0,1)!=_,E=l((function(){_.has(1)})),R=f((function(t){new m(t)})),$=!g&&l((function(){var t=new m,e=5;while(e--)t[w](e,e);return!t.has(-0)}));R||(b=e((function(e,r){u(e,b,t);var n=v(new m,e,b);return void 0!=r&&c(r,n[w],n,h),n})),b.prototype=y,y.constructor=b),(E||$)&&(x("delete"),x("has"),h&&x("get")),($||k)&&x(w),g&&y.clear&&delete y.clear}return C[t]=b,n({global:!0,forced:b!=m},C),p(b,t),g||r.setStrong(b,t,h),b}},ab13:function(t,e,r){var n=r("b622"),i=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(n){}}return!1}},bb2f:function(t,e,r){var n=r("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c371:function(t,e,r){},caad:function(t,e,r){"use strict";var n=r("23e7"),i=r("4d64").includes,o=r("44d2"),s=r("ae40"),a=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!a},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},f183:function(t,e,r){var n=r("d012"),i=r("861d"),o=r("5135"),s=r("9bf2").f,a=r("90e3"),c=r("bb2f"),u=a("meta"),d=0,l=Object.isExtensible||function(){return!0},f=function(t){s(t,u,{value:{objectID:"O"+ ++d,weakData:{}}})},p=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,u)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[u].objectID},v=function(t,e){if(!o(t,u)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[u].weakData},h=function(t){return c&&g.REQUIRED&&l(t)&&!o(t,u)&&f(t),t},g=t.exports={REQUIRED:!1,fastKey:p,getWeakData:v,onFreeze:h};n[u]=!0}}]);
//# sourceMappingURL=chunk-1855d413.2574b1c0.js.map