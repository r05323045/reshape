(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39cd0dda"],{5899:function(t,r){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,r,a){var e=a("1d80"),i=a("5899"),c="["+i+"]",n=RegExp("^"+c+c+"*"),o=RegExp(c+c+"*$"),s=function(t){return function(r){var a=String(e(r));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(t,r,a){var e=a("861d"),i=a("d2bb");t.exports=function(t,r,a){var c,n;return i&&"function"==typeof(c=r.constructor)&&c!==a&&e(n=c.prototype)&&n!==a.prototype&&i(t,n),t}},8418:function(t,r,a){"use strict";var e=a("c04e"),i=a("9bf2"),c=a("5c6c");t.exports=function(t,r,a){var n=e(r);n in t?i.f(t,n,c(0,a)):t[n]=a}},"99af":function(t,r,a){"use strict";var e=a("23e7"),i=a("d039"),c=a("e8b5"),n=a("861d"),o=a("7b0b"),s=a("50c4"),u=a("8418"),d=a("65f0"),p=a("1dde"),l=a("b622"),f=a("2d00"),h=l("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",g=f>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),_=p("concat"),y=function(t){if(!n(t))return!1;var r=t[h];return void 0!==r?!!r:c(t)},C=!g||!_;e({target:"Array",proto:!0,forced:C},{concat:function(t){var r,a,e,i,c,n=o(this),p=d(n,0),l=0;for(r=-1,e=arguments.length;r<e;r++)if(c=-1===r?n:arguments[r],y(c)){if(i=s(c.length),l+i>v)throw TypeError(m);for(a=0;a<i;a++,l++)a in c&&u(p,l,c[a])}else{if(l>=v)throw TypeError(m);u(p,l++,c)}return p.length=l,p}})},a9e3:function(t,r,a){"use strict";var e=a("83ab"),i=a("da84"),c=a("94ca"),n=a("6eeb"),o=a("5135"),s=a("c6b6"),u=a("7156"),d=a("c04e"),p=a("d039"),l=a("7c73"),f=a("241c").f,h=a("06cf").f,v=a("9bf2").f,m=a("58a8").trim,g="Number",_=i[g],y=_.prototype,C=s(l(y))==g,b=function(t){var r,a,e,i,c,n,o,s,u=d(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),r=u.charCodeAt(0),43===r||45===r){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(u.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+u}for(c=u.slice(2),n=c.length,o=0;o<n;o++)if(s=c.charCodeAt(o),s<48||s>i)return NaN;return parseInt(c,e)}return+u};if(c(g,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var x,w=function(t){var r=arguments.length<1?0:t,a=this;return a instanceof w&&(C?p((function(){y.valueOf.call(a)})):s(a)!=g)?u(new _(b(r)),a,w):b(r)},N=e?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;N.length>I;I++)o(_,x=N[I])&&!o(w,x)&&v(w,x,h(_,x));w.prototype=y,y.constructor=w,n(i,g,w)}},bd21:function(t,r,a){"use strict";var e=a("cd3a"),i=a.n(e);i.a},c975:function(t,r,a){"use strict";var e=a("23e7"),i=a("4d64").indexOf,c=a("a640"),n=a("ae40"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=c("indexOf"),d=n("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:s||!u||!d},{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},cd3a:function(t,r,a){},d2f1:function(t,r,a){"use strict";a.r(r);var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{ref:"product",staticClass:"product"},[a("div",{staticClass:"router-wrapper mt-3"},[a("router-link",{attrs:{to:"/"}},[a("span",{staticClass:"mr-2 router"},[t._v("首頁")])]),a("i",{staticClass:"fas fa-chevron-right"}),a("span",{staticClass:"ml-2"},[t._v(t._s(t.product.category))])],1),t.product.title?a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-7 images"},[a("div",{staticClass:"main-img"},[a("img",{staticClass:"w-100",attrs:{src:t.product.imageUrl?t.product.imageUrl[0]:""}})])]),a("div",{staticClass:"col-5 info"},[a("div",{staticClass:"title"},[t._v(t._s(t.product.title))]),a("div",{staticClass:"price-wrapper"},[a("div",{staticClass:"price"},[t._v(t._s(t._f("priceFormat")(t.product.price)))]),a("div",{directives:[{name:"show",rawName:"v-show",value:.85>t.product.price/t.product.origin_price,expression:"0.85 > product.price/product.origin_price"}],staticClass:"origin-price"},[t._v(t._s(t._f("priceFormat")(t.product.origin_price)))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:.85>t.product.price/t.product.origin_price,expression:"0.85 > product.price/product.origin_price"}],staticClass:"discount"},[a("div",{staticClass:"badge"},[t._v(" "+t._s(10*(t.product.price/t.product.origin_price).toFixed(1)+" 折")+" ")]),a("div",{staticClass:"save-money"},[t._v(" 省下"+t._s(t._f("priceFormat")(t.product.origin_price-t.product.price))+" ")])]),a("div",{staticClass:"content"},[a("div",{domProps:{innerHTML:t._s(t.product.content)}})]),a("div",{staticClass:"rating"},[t._l(t.randomRating.rate,(function(t,r){return a("span",{key:r,staticClass:"star-item",class:t})})),a("span",{staticClass:"count"},[t._v(t._s("("+t.randomRating.count+")"))])],2),a("div",{staticClass:"quantity"},[a("div",[t._v("數量")]),a("div",{staticClass:"input-area"},[t.cartPatch.quantity<=4?a("select",{directives:[{name:"model",rawName:"v-model",value:t.cartQuantity,expression:"cartQuantity"}],staticClass:"form-control",on:{change:function(r){var a=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){var r="_value"in t?t._value:t.value;return r}));t.cartQuantity=r.target.multiple?a:a[0]}}},[t._l(Array.from(Array(4).keys()),(function(r){return a("option",{key:r},[t._v(" "+t._s(r+1)+" ")])})),a("option",{attrs:{value:"5"}},[t._v("5+")])],2):t._e(),a("validation-observer",[a("validation-provider",{attrs:{rules:"required|numeric|min_value:1"},scopedSlots:t._u([{key:"default",fn:function(r){var e=r.errors;return[a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.cartQuantity,expression:"cartQuantity",modifiers:{lazy:!0}},{name:"show",rawName:"v-show",value:t.cartPatch.quantity>4,expression:"cartPatch.quantity > 4"}],ref:"quantity-input-"+t.product.id,staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.cartQuantity},on:{change:function(r){t.cartQuantity=r.target.value}}}),e[0]?a("span",{staticClass:"text-danger quantity-error"},[t._v(t._s("數量"+e[0].slice(t.product.id.length+16,e[0].length)))]):t._e()]}}],null,!1,3771546008)})],1)],1)]),a("div",{staticClass:"put-in-cart"},[t.alreadyPut?t._e():a("div",{staticClass:"add-to-cart btn d-flex justify-content-center mt-3 mb-3",on:{click:t.addToCart}},[a("span",[t._v("放入購物車")])]),t.alreadyPut?a("div",{staticClass:"go-to-checkout btn d-flex justify-content-center mt-3 mb-3",on:{click:function(r){return t.$router.push("/cart")}}},[a("span",[t._v("立刻結帳")])]):t._e()]),a("div",{staticClass:"description"},[t._v(" "+t._s(t.product.description)+" ")])])]):t._e()])},i=[],c=(a("99af"),a("c975"),a("d81d"),a("a9e3"),{name:"Product",data:function(){return{product:{},cart:{},cartPatch:{product:String,quantity:1},cartQuantity:1,alreadyPut:!1,randomRating:{rate:[],count:Number}}},computed:{cartId:function(){return this.cart.length>0?this.cart.map((function(t){return t.product.id})):[]}},watch:{cartQuantity:function(t,r){var a=t;(!/^[0-9]+$/.test(a)||a<1)&&(a=r,this.cartQuantity=r),this.cartPatch.quantity=a}},created:function(){var t=this,r=this.$loading.show({container:this.$refs.product,opacity:1,isFullPage:!0}),a=this.$route.params.id;this.cartPatch.product=a;var e="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/product/").concat(a);this.$http.get(e).then((function(a){t.product=a.data.data,t.getCart(r)})),this.randomRating.rate=this.rating(),this.randomRating.count=Math.floor(50+500*Math.random())},methods:{rating:function(){for(var t=[],r=Math.floor(2.5*(2.5+2*Math.random()))/2,a=0;a<Math.floor(r);a++)t.push("on");r%1!==0&&t.push("half");while(t.length<5)t.push("off");return t},addToCart:function(){var t=this,r=this.$loading.show({container:this.$refs.product,opacity:.8}),a="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/shopping"),e="post",i=this.cartId.indexOf(this.cartPatch.product);i>=0&&(e="patch",this.cart[i].quantity===Number(this.cartPatch.quantity)&&(e="none",setTimeout((function(){r.hide()}),1e3))),"none"!==e&&this.$http[e](a,this.cartPatch).then((function(){t.getCart(r)})).catch((function(t){console.log(t.response.data.errors)})),this.alreadyPut=!0},getCart:function(t){var r=this,a="".concat("https://course-ec-api.hexschool.io/","api/").concat("765c633d-f16f-4821-90b7-1588004cb252","/ec/shopping");this.$http.get(a).then((function(a){r.cart=a.data.data,t&&t.hide(),r.$bus.$emit("cartUpdate",{cart:r.cart})}))}}}),n=c,o=(a("bd21"),a("2877")),s=Object(o["a"])(n,e,i,!1,null,null,null);r["default"]=s.exports},d81d:function(t,r,a){"use strict";var e=a("23e7"),i=a("b727").map,c=a("1dde"),n=a("ae40"),o=c("map"),s=n("map");e({target:"Array",proto:!0,forced:!o||!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-39cd0dda.523442b5.js.map